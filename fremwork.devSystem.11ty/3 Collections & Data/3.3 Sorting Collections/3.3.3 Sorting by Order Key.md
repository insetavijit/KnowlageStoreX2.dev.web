# Sorting by Order Key: Manual Sequence Control

Date-based sorting works for chronological content, but **documentation pages, tutorials, and navigation menus** require explicit positioning. The "Order Key" pattern gives you complete control over sequence using a simple numeric field in front matter.

---

## The Fundamental Principle: Numbers Before Dates

When content has a logical sequence that isn't time-based, dates become meaningless. A tutorial's "Step 1" should always appear before "Step 2" regardless of when each file was created.

Think of order keys as **page numbers in a book**. The book's structure is intentionalâ€”Chapter 3 follows Chapter 2 not because it was written later, but because the author designed it that way.

---

## Basic Implementation

**Front Matter:**

```yaml
---
title: "Getting Started"
order: 1
---
```

```yaml
---
title: "Configuration"
order: 2
---
```

```yaml
---
title: "Advanced Topics"
order: 3
---
```

**Collection Sort:**

```javascript
eleventyConfig.addCollection("docs", collection => {
  return collection.getFilteredByTag("docs")
    .sort((a, b) => {
      return (a.data.order || 0) - (b.data.order || 0);
    });
});
```

The `|| 0` fallback ensures items without an `order` field don't cause `NaN` comparisons.

---

## Choosing Key Names

Different conventions exist:

| Key | Use Case |
| :--- | :--- |
| `order` | Generic, widely understood |
| `weight` | Common in Hugo, lower = first |
| `position` | Explicit about placement |
| `sortIndex` | Technical, unambiguous |
| `priority` | Sometimes inverted (higher = first) |

**Be consistent.** Choose one convention and document it for your team.

---

## Handling Missing Order Keys

Items without an order key can either:

**Float to the top (treat as 0):**

```javascript
(a.data.order || 0) - (b.data.order || 0)
```

**Sink to the bottom (treat as Infinity):**

```javascript
(a.data.order ?? Infinity) - (b.data.order ?? Infinity)
```

**Be filtered out entirely:**

```javascript
.filter(item => item.data.order !== undefined)
.sort((a, b) => a.data.order - b.data.order)
```

The right choice depends on your content model. For documentation, filtering out items without order prevents unfinished pages from appearing in navigation.

---

## Gaps in Numbering

A powerful technique is to leave gaps:

```yaml
order: 10  # Introduction
order: 20  # Installation
order: 30  # First Steps
```

This allows you to insert new content (e.g., `order: 25`) without renumbering everything. The convention of using multiples of 10 (or 100) is borrowed from classic line-numbered BASIC programming.

---

## Secondary Sort Key

When two items have the same order value, their relative position is undefined. Add a secondary sort:

```javascript
.sort((a, b) => {
  const orderDiff = (a.data.order || 0) - (b.data.order || 0);
  if (orderDiff !== 0) return orderDiff;
  
  // Secondary: alphabetical by title
  return a.data.title.localeCompare(b.data.title);
})
```

This ensures deterministic, reproducible builds even when order values collide.

---

## Use Case: Sidebar Navigation

A common pattern for documentation sites:

```javascript
eleventyConfig.addCollection("sidebar", collection => {
  return collection.getFilteredByGlob("src/docs/**/*.md")
    .filter(item => item.data.order !== undefined)
    .sort((a, b) => a.data.order - b.data.order);
});
```

**Template:**

```html
<nav class="sidebar">
  <ul>
    {% for doc in collections.sidebar %}
      <li>
        <a href="{{ doc.url }}"{% if page.url === doc.url %} aria-current="page"{% endif %}>
          {{ doc.data.title }}
        </a>
      </li>
    {% endfor %}
  </ul>
</nav>
```

The sidebar always appears in the intended order, regardless of file creation dates.

---

## Common Pitfalls and Solutions

**Problem:** Items appear in random order despite having order keys.

**Cause:** Likely using string comparison instead of numeric. `"10" < "2"` is true in string comparison.

**Solution:** Ensure integer math: `parseInt(a.data.order, 10) - parseInt(b.data.order, 10)`

---

**Problem:** New items always appear at the bottom.

**Cause:** Missing order key defaults to 0, but existing items start at 1.

**Solution:** Decide on a consistent default (0 = top, or Infinity = bottom) and document it.

---

**Problem:** Renumbering many files after inserting one new page.

**Solution:** Use gaps in numbering (10, 20, 30...) to reserve space for future insertions.

---

## Quick Reference

| Pattern | Code |
| :--- | :--- |
| **Basic Sort** | `a.data.order - b.data.order` |
| **Default Top** | `(a.data.order \|\| 0)` |
| **Default Bottom** | `(a.data.order ?? Infinity)` |
| **With Fallback** | Add secondary `localeCompare()` |
| **Typical Gaps** | `10, 20, 30...` or `100, 200...` |

---

_This guide covers order key sorting. Natural progressions include **alphabetical sorting**, **multi-level hierarchies**, and **combining order with date for hybrid strategies**._
