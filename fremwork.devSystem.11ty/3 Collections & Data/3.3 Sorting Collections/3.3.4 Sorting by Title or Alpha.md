# Sorting by Title: Alphabetical Organization

Alphabetical sorting creates an intuitive, dictionary-like order that users can navigate mentally. When someone looks for "Button" in a component library, they expect it before "Card"—not buried based on when it was created.

---

## The Fundamental Principle: Strings Compare Differently

Unlike dates and numbers, strings don't subtract cleanly. JavaScript's `<` and `>` operators work on strings, but they use **Unicode code point values**, which leads to surprising results:

```javascript
"apple" < "banana"  // true (correct)
"Apple" < "banana"  // true (but not intuitive!)
"apple" < "Banana"  // false (wrong for alphabetical)
```

The capital "A" (code point 65) is less than lowercase "b" (code point 98), so "Apple" < "banana" is true. But "apple" (97) is greater than "Banana" (66), so "apple" < "Banana" is false.

This is why you should **never** use simple comparison for alphabetical sorting.

---

## The `localeCompare` Method

JavaScript provides `String.prototype.localeCompare()` for proper alphabetical comparison:

```javascript
"apple".localeCompare("Banana")  // negative (a before B)
"Apple".localeCompare("banana")  // negative (A before b)
"banana".localeCompare("apple")  // positive (b after a)
```

`localeCompare` returns:
- Negative number: first string comes before second
- Zero: strings are equal
- Positive number: first string comes after second

This is exactly what `.sort()` expects.

---

## Basic Implementation

```javascript
eleventyConfig.addCollection("alphabetical", collection => {
  return collection.getFilteredByTag("components")
    .sort((a, b) => {
      const titleA = a.data.title || a.fileSlug;
      const titleB = b.data.title || b.fileSlug;
      return titleA.localeCompare(titleB);
    });
});
```

The `|| a.fileSlug` fallback handles items without explicit titles.

---

## Case-Insensitive Sorting

By default, `localeCompare` is case-insensitive for most locales. For explicit control:

```javascript
titleA.localeCompare(titleB, 'en', { sensitivity: 'base' })
```

**Sensitivity options:**
- `'base'`: Ignores case and accents (a = A = á)
- `'accent'`: Ignores case but respects accents (a = A, á ≠ a)
- `'case'`: Ignores accents but respects case (a ≠ A, á = a)
- `'variant'`: Respects everything (a ≠ A ≠ á)

For most alphabetical lists, `'base'` or default behavior works well.

---

## Handling Non-English Characters

German umlauts, French accents, and other diacritics need proper locale handling:

```javascript
// Without locale awareness
["Äpfel", "Banane", "Café"].sort()
// Might produce: ["Banane", "Café", "Äpfel"] (wrong!)

// With locale awareness
["Äpfel", "Banane", "Café"].sort((a, b) => a.localeCompare(b, 'de'))
// Produces: ["Äpfel", "Banane", "Café"] (correct for German)
```

**Best Practice:** Always specify a locale, even if it's `'en'`:

```javascript
a.data.title.localeCompare(b.data.title, 'en', { sensitivity: 'base' })
```

---

## Numeric Strings

A surprising edge case: alphabetical sort treats numbers as strings:

```javascript
["10", "2", "1"].sort((a, b) => a.localeCompare(b))
// Result: ["1", "10", "2"]
```

"10" comes after "1" but before "2" because "10" starts with "1", and "1" < "2".

**Solution:** Use `numeric: true` option:

```javascript
["10", "2", "1"].sort((a, b) => a.localeCompare(b, 'en', { numeric: true }))
// Result: ["1", "2", "10"]
```

This is essential for file lists like "Chapter 1", "Chapter 2", "Chapter 10".

---

## Common Pitfalls and Solutions

**Problem:** Capital letters sort before lowercase unexpectedly.

**Solution:** Use `localeCompare` with `sensitivity: 'base'`.

---

**Problem:** Numbers in titles sort as strings ("10" before "2").

**Solution:** Add `numeric: true` to localeCompare options.

---

**Problem:** Missing titles cause crashes.

**Solution:** Fallback to `fileSlug` or empty string:
```javascript
const title = a.data.title || a.fileSlug || "";
```

---

**Problem:** Accented characters appear at the end.

**Solution:** Specify the appropriate locale for your content language.

---

## Quick Reference

| Pattern | Code |
| :--- | :--- |
| **Basic Alpha** | `a.localeCompare(b)` |
| **Case Insensitive** | `a.localeCompare(b, 'en', { sensitivity: 'base' })` |
| **Numeric Strings** | `a.localeCompare(b, 'en', { numeric: true })` |
| **Locale Specific** | `a.localeCompare(b, 'de')` for German |
| **Combined** | `{ sensitivity: 'base', numeric: true }` |

---

_This guide covers alphabetical sorting. Natural progressions include **multi-field sorting**, **grouping alphabetically**, and **custom collation sequences**._
