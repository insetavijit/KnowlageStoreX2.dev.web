# Troubleshooting Scope: When Directory Data Doesn't Apply

Directory data issues are among the most common Eleventy debugging challenges. When your carefully crafted defaults don't appear in templates, here's how to diagnose and fix the problem.

---

## The Fundamental Principle: Convention Must Be Exact

Eleventy's naming convention is strict. Small deviations break the connection.

---

## Common Problem: File Doesn't Match Folder Name

**Folder:** `posts/`
**File:** `post.json` ← Missing 's'!

**Solution:** The file must match the folder **exactly**:
- `posts/posts.json` ✓
- `posts/posts.11tydata.json` ✓

---

## Common Problem: File in Wrong Location

**Wrong:**
```
posts.json         ← Outside the folder!
posts/
  hello.md
```

**Correct:**
```
posts/
  posts.json       ← Inside the folder
  hello.md
```

---

## Common Problem: Wrong Extension

**Supported:**
- `.json`
- `.yaml` (usually)
- `.11tydata.json`
- `.11tydata.js`
- `.11tydata.cjs`
- `.11tydata.mjs`

**Not Supported:**
- `.txt`
- `.yml` (sometimes needs plugin)
- `.data.json` (wrong pattern)

---

## Common Problem: Invalid JSON

Broken JSON fails silently or crashes the build:

```json
{
  "layout": "post.njk",   // <- Trailing comma invalid in JSON
}
```

**Fix:** Remove trailing commas, use a JSON validator.

---

## Debugging Technique: Log Filter

Create a debug filter to see what data actually arrived:

```javascript
eleventyConfig.addFilter("debug", value => {
  console.log(value);
  return "";
});
```

In template:
```html
{{ layout | debug }}
{{ tags | debug }}
```

Check the terminal for output.

---

## Debugging Technique: Minimal Reproduction

1. Create a new, empty folder
2. Add one `.md` file with minimal content
3. Add the directory data file
4. Rebuild and check if it works

This isolates the issue from complex folder structures.

---

## Debugging Technique: Check the Build Output

Eleventy logs which files it processes. Look for your directory data file in the output:

```bash
[11ty] Writing _site/posts/hello/index.html from ./posts/hello.md
```

If your data file isn't mentioned, it might not be recognized.

---

## Common Problem: Subdirectory Scope

Remember: directory data only applies to **immediate children**, not nested folders.

```
posts/
├── posts.json        # Only applies to files here
└── 2024/
    └── article.md    # Does NOT get posts.json
```

**Solution:** Add `posts/2024/2024.json` for the subfolder.

---

## Common Problem: Case Sensitivity

On case-sensitive file systems (Linux):
- `Posts/posts.json` might not match `posts/`

Always use consistent casing.

---

## Quick Reference

| Issue | Symptom | Fix |
| :--- | :--- | :--- |
| **Wrong filename** | Data missing | Match folder name exactly |
| **Wrong location** | Data missing | Move file inside folder |
| **Invalid JSON** | Build error or missing | Validate JSON syntax |
| **Subdirectory** | Nested files don't inherit | Add data files to subfolders |
| **Case mismatch** | Works locally, fails in CI | Consistent lowercase names |

---

_This guide covers troubleshooting directory data. Natural progressions include **computed data** and **custom data extensions**._
