| **Subtopic** | **Focus & Purpose** | **Key Concepts / Details** | **One-Line Recall** |
| :--- | :--- | :--- | :--- |
| **3.1.2 The `all` Collection** | Global Access | `collections.all`; Every output file; Sitemaps | The list of everything. |
| **[[3.1.2.1 What is 'all'?]]** | Definition | Automatically generated; contains every processed template | The master list. |
| **[[3.1.2.2 Sitemaps & RSS]]** | Usage | Perfect for generating `sitemap.xml` or `feed.xml` | Telling Google what exists. |
| **[[3.1.2.3 Exclusion]]** | Control | `eleventyExcludeFromCollections: true`; Hiding 404s/Drafts | Keeping secrets. |
| **[[3.1.2.4 Performance Cost]]** | Efficiency | Iterating `collections.all` on every page is expensive | Don't loop 10k items 10k times. |
| **[[3.1.2.5 Filtering 'all']]** | Technique | Creating sub-lists via filters (e.g., specific formats) | Slicing the pie. |

# 3.1.2 The `all` Collection

While tagged collections (like `collections.post`) are useful for specific content types, Eleventy provides one automatic collection that rules them all: **`collections.all`**.

This array contains **every single content template** in your project that outputs a file.

---

## 3.1.2.1 What is Included?

`collections.all` includes:
1.  Markdown files (`.md`).
2.  Nunjucks/Liquid templates (`.njk`, `.liquid`).
3.  HTML files processed by Eleventy (`.html`).
4.  Pages generated from Pagination.

It does **NOT** include:
1.  Assets (CSS, JS, Images) unless they are processed templates.
2.  Files in `_includes` or `_data`.
3.  Files with `eleventyExcludeFromCollections: true`.

---

## 3.1.2.2 Sitemaps & RSS

The primary use case for `collections.all` is generating technical files that need to know about every URL on your site.

**`sitemap.xml.njk`**:
```html
---
permalink: /sitemap.xml
eleventyExcludeFromCollections: true
---
<?xml version="1.0" encoding="utf-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
{% for page in collections.all %}
  <url>
    <loc>{{ site.url }}{{ page.url | url }}</loc>
    <lastmod>{{ page.date.toISOString() }}</lastmod>
  </url>
{% endfor %}
</urlset>
```

This single template automatically updates your sitemap whenever you add any new page to the site.

---

## 3.1.2.3 Exclusion (The 404 Problem)

If you don't exclude special pages, they end up in your sitemap and "Next/Previous" links.

**Common Exclusions**:
*   `404.md` (Page Not Found)
*   `sitemap.xml.njk` (The sitemap itself)
*   `_redirects.njk` (Netlify redirects)
*   Drafts (if handling manually)

**Front Matter**:
```yaml
---
permalink: /404.html
eleventyExcludeFromCollections: true
---
```

---

## 3.1.2.4 Performance Cost

Be careful using `collections.all` inside commonly used includes (like a footer).

If your site has 1,000 pages, and your Footer template loops through `collections.all` to find "Related Links", Eleventy has to perform that loop 1,000 times (once for every output page). That's **1,000,000 iterations**.

**Best Practice**:
Use `collections.all` only in:
1.  Build artifacts (sitemaps, feeds) - generated once.
2.  The Home Page - generated once.
3.  Avoid it in Layouts used by every page.

---

## 3.1.2.5 Filtering 'all'

Sometimes you want to process everything but filtering it first.

**Example**: Finding all pages that *don't* have a title (Audit).

```html
{% for page in collections.all %}
  {% if not page.data.title %}
    Warning: {{ page.inputPath }} has no title!<br>
  {% endif %}
{% endfor %}
```

This is often used in "Quality Assurance" templates that run only in development mode.

---

## Quick Reference

| key | Value | Effect |
| :--- | :--- | :--- |
| **Name** | `collections.all` | The array of all page objects. |
| **Exclude** | `eleventyExcludeFromCollections` | Removes from `all` (and everything else). |
| **Order** | Date (Asc.) | Sorted by date default. |
| **Use Case** | Sitemaps, Search Index, RSS | Global lists. |
