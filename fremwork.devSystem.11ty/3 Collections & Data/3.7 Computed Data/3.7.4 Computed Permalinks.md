# Computed Permalinks: Dynamic URL Generation

One of the most powerful uses of computed data is generating **permalinks** (output URLs) dynamically based on content metadata. This enables SEO-friendly URLs, date-based archives, and custom routing logic.

---

## The Fundamental Principle: URL as Data

Instead of hardcoding URLs in every file, compute them from the data:

```yaml
---
title: "Hello World"
eleventyComputed:
  permalink: "/blog/{{ title | slug }}/"
---
```

Output: `/blog/hello-world/`

---

## Date-Based URLs

Common for blogs:

```yaml
---
date: 2024-05-15
eleventyComputed:
  permalink: "/blog/{{ page.date | date: '%Y/%m/%d' }}/{{ page.fileSlug }}/"
---
```

Output: `/blog/2024/05/15/my-post/`

---

## Category-Based URLs

Organize by taxonomy:

```yaml
---
category: "tutorials"
eleventyComputed:
  permalink: "/{{ category }}/{{ page.fileSlug }}/"
---
```

Output: `/tutorials/getting-started/`

---

## Conditional Permalinks

Generate different URLs based on conditions:

```javascript
// posts.11tydata.js
module.exports = {
  eleventyComputed: {
    permalink: (data) => {
      if (data.featured) {
        return `/featured/${data.page.fileSlug}/`;
      }
      return `/blog/${data.page.fileSlug}/`;
    }
  }
};
```

---

## Disabling Output

Set permalink to `false` to prevent a file from generating output:

```javascript
eleventyComputed: {
  permalink: (data) => {
    if (data.draft && process.env.NODE_ENV === "production") {
      return false; // No output in production
    }
    return data.permalink || `/blog/${data.page.fileSlug}/`;
  }
}
```

---

## Pagination Permalinks

For paginated pages:

```yaml
---
pagination:
  data: collections.post
  size: 10
eleventyComputed:
  permalink: "/blog/{% if pagination.pageNumber > 0 %}page/{{ pagination.pageNumber + 1 }}/{% endif %}"
---
```

- Page 1: `/blog/`
- Page 2: `/blog/page/2/`
- Page 3: `/blog/page/3/`

---

## URL Slugification

Always slugify titles to create valid URLs:

```yaml
---
title: "My Awesome Post!"
eleventyComputed:
  permalink: "/blog/{{ title | slugify }}/"
---
```

Output: `/blog/my-awesome-post/` (removes special characters)

---

## Common Pitfalls and Solutions

**Problem:** Permalink contains undefined variables.

**Cause:** The referenced variable doesn't exist in the data cascade.

**Solution:** Provide fallbacks: `{{ title | default: "untitled" | slugify }}`.

---

**Problem:** Duplicate permalinks cause conflicts.

**Cause:** Two files compute to the same URL.

**Solution:** Include unique identifiers (date, file slug, ID) in the permalink pattern.

---

**Problem:** Special characters break URLs.

**Solution:** Always use `| slugify` or `| slug` filter on dynamic values.

---

## Quick Reference

| Pattern | Example |
| :--- | :--- |
| **Title-based** | `/blog/{{ title \| slug }}/` |
| **Date-based** | `/{{ page.date \| date: '%Y/%m' }}/{{ page.fileSlug }}/` |
| **Category** | `/{{ category }}/{{ page.fileSlug }}/` |
| **Conditional** | `(data) => data.featured ? "/featured/..." : "/blog/..."` |
| **Disable** | `return false;` |

---

_This guide covers computed permalinks. Natural progressions include **pagination patterns** and **URL normalization strategies**._
