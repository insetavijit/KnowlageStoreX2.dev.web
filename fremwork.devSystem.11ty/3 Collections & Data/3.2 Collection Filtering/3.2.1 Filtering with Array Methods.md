| **Subtopic** | **Focus & Purpose** | **Key Concepts / Details** | **One-Line Recall** |
| :--- | :--- | :--- | :--- |
| **3.2.1 Filtering with Array Methods** | Logic | `Array.filter()`; `.map()`; `.reduce()` | Using standard JS. |
| **[[3.2.1.1 The .filter() Method]]** | Core | `collection.filter(item => condition)`; Returning subset | Keep the good ones. |
| **[[3.1.2.2 Filtering by Boolean]]** | Common | `item.data.published`; Checking true/false flags | True or false. |
| **[[3.1.2.3 Filtering by Value]]** | Specificity | `item.data.category === "news"`; Exact match | Pick specific items. |
| **[[3.1.2.4 Chaining Methods]]** | Power | `.filter().sort().slice(0, 5)`; Combining logic | Filter then Sort then Cut. |
| **[[3.1.2.5 Exclusion Logic]]** | Safety | `!item.data.draft`; Negating conditions to remove items | Filter out the bad. |

# 3.2.1 Filtering with Array Methods

Since Eleventy configuration is just JavaScript (Node.js), you have the full power of the ES6 Array API at your disposal.

The `collectionApi.getAll()` method returns a standard JavaScript Array of objects.

---

## 3.2.1.1 The `.filter()` Method

The most important method is `.filter()`. It iterates over every item in the array.
*   Return `true`: Keep the item.
*   Return `false`: Discard the item.

```javascript
eleventyConfig.addCollection("myCollection", function(collectionApi) {
  return collectionApi.getAll().filter(function(item) {
    // Your logic here
    return true; 
  });
});
```

---

## 3.2.1.2 Filtering by Boolean (Flags)

A common pattern is to use a "Flag" in Front Matter.

**Front Matter**:
```yaml
title: My Post
featured: true
```

**Config**:
```javascript
eleventyConfig.addCollection("featured", collection => {
  return collection.getAll().filter(item => {
    // Only return items where `featured` is strictly true
    return item.data.featured === true;
  });
});
```

---

## 3.2.1.3 Filtering by Value

You can check for specific string matches.

```javascript
eleventyConfig.addCollection("videos", collection => {
  return collection.getAll().filter(item => {
    // Check if the contentType is "video"
    return item.data.contentType === "video";
  });
});
```

**Tip**: Use `.includes()` for partial matches if needed (`title.includes("Draft")`).

---

## 3.2.1.4 Chaining Methods

Because `.filter()` returns a new Array, you can chain other Array methods immediately after it.

**Goal**: Get the 3 most recent "Featured" posts.

```javascript
eleventyConfig.addCollection("recentFeatured", collection => {
  return collection.getAll()
    .filter(item => item.data.featured) // 1. Filter
    .sort((a, b) => b.date - a.date)    // 2. Sort (Newest first)
    .slice(0, 3);                       // 3. Slice (Top 3)
});
```

This pipeline is extremely readable and expressive.

---

## 3.2.1.5 Exclusion Logic (Drafts)

Often it is easier to think about what you *don't* want.

**Goal**: All posts *except* drafts.

```javascript
eleventyConfig.addCollection("cleanPosts", collection => {
  return collection.getFilteredByTag("post").filter(item => {
    // If draft is true, return false (remove it)
    return !item.data.draft;
  });
});
```

*Note*: This requires you to add `draft: true` to your draft files.

---

## Quick Reference

| Method | Syntax | Behavior |
| :--- | :--- | :--- |
| **Filter** | `.filter()` | Returns subset based on condition. |
| **Map** | `.map()` | Transforms items (e.g., getting just URLs). |
| **Sort** | `.sort()` | Reorders items (Mutates in place!). |
| **Slice** | `.slice(0, n)` | Takes the first `n` items. |
| **Reverse**| `.reverse()` | Flips order (Mutates!). |
