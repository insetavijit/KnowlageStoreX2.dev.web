| **Subtopic**                             | **Focus & Purpose**  | **Key Concepts / Details**                                                   | **One-Line Recall**                        |
| :--------------------------------------- | :------------------- | :--------------------------------------------------------------------------- | :----------------------------------------- |
| **2.2.3 Layout Wrapping vs Inheritance** | Architectural choice | Chaining (11ty) vs Extending (Nunjucks); when to use which                   | Wrappers go outside, Extensions go inside. |
| **[[2.2.3.1 Concept Comparison]]**       | Mental Model         | Wrapper = shell (HTML); Extension = replacement (Logic).                     | Understand the structural difference.      |
| **[[2.2.3.2 When to Wrap]]**             | Use Cases            | Generic page shells; markdown content; simple parent/child structures        | Wrap for general structure.                |
| **[[2.2.3.3 When to Extend]]**           | Use Cases            | Specific page variations; overriding generic blocks; complex logic           | Extend for specific modifications.         |
| **[[2.2.3.4 Hybrid Approach]]**          | Mixing Both          | Using `layout` front matter on a file that uses `{% extends %}` (be careful) | You can mix them, but be careful.          |
| **[[2.2.3.5 Performance Implications]]** | Optimization         | Inheritance is often faster (engine native) vs wrapping (11ty processing)    | Extensions are engine-native and fast.     |

# Architectural Duality: Wrapper vs. Extender

In Eleventy, you have two distinct ways to reuse templates: **Layout Wrapping** (the Eleventy way) and **Template Inheritance** (the Nunjucks/Liquid way). This duality often confuses developers coming from other systems, but they are complementary tools in your arsenal.

*   **Layout Wrapping** uses `layout: name.njk` in front matter.
*   **Template Inheritance** uses `{% extends "name.njk" %}` in the code.

They are not mutually exclusive, but they represent different mental models. Understanding when to use which is the key to a clean architecture.

---

## 2.2.3.1 Concept Comparison

To visualize the difference, consider how they function:

| Feature | Layout Wrapping (Chaining) | Template Inheritance (Extending) |
| :--- | :--- | :--- |
| **Mechanism** | Front Matter (`layout:`) | Tag (`{% extends %}`) |
| **Direction** | **Outside-In** (Wrapper nests Content) | **Mixed** (Child mutates Parent) |
| **Injection** | `{{ content }}` only | Multiple named `{% block %}` areas |
| **Scope** | Child doesn't see Parent vars | Child/Parent share context more freely |
| **Analogy** | Matryoshka Dolls (Nesting) | Genetic Cloning (Mutation) |

**Layout Wrapping** (Chaining) is best for general document structure. It treats the inner content as a "blob" to be placed inside a container. It is simple, declarative, and works with any template language (Markdown inside Liquid inside Nunjucks).

**Template Inheritance** (Extending) is best for granular control. It allows the child to surgically alter specific parts of the parent (the title, the sidebar, the footer) while keeping the rest. It is powerful, imperative, and usually requires the same template language (Nunjucks extending Nunjucks).

---

## 2.2.3.2 When to Wrap (The "Content" Rule)

Use **Layout Wrapping** for your primary content pages, especially Markdown files.

*   **Scenario**: Blog Posts, Documentation Pages, About Page.
*   **Why**: Markdown files cannot natively use `{% extends %}` easily without configuration tweaks. They are designed to produce a "content blob" that gets wrapped.
*   **Pattern**: `post.md` -> `layout: post.njk`.

**The Golden Rule**: If you are writing **Content** (text, articles, pages), use Wrapping.

---

## 2.2.3.3 When to Extend (The "Structure" Rule)

Use **Template Inheritance** for your layout files themselves, specifically when building variations of a theme.

*   **Scenario**: Creating variations of a landing page.
*   **Why**: You have a `marketing-base.njk`. You want a `pricing.njk` that is exactly the same, but with a different Hero section and no footer.
*   **Pattern**: `pricing.njk` starts with `{% extends "marketing-base.njk" %}` and overrides `{% block hero %}`.

**The Golden Rule**: If you are writing **Structure** (Nunjucks/HTML) and need to modify an existing template's internal slots, use Extending.

---

## 2.2.3.4 The Hybrid Approach (And Danger Zones)

You can mix them, but this is where "Dragons be here."

**The Trap**:
If `post.njk` uses `{% extends "base.njk" %}`, it is **NOT** a standard layout wrapper anymore. It is a child template.
Eleventy expects a layout wrapper (defined in `layout:` front matter) to imply "Inject content here."
But `{% extends %}` implies "I am taking over rendering."

**Correct Hybrid Flow**:
1.  `post.md` uses `layout: post.njk`.
2.  `post.njk` does **NOT** use `extends`. It is a standard wrapper.
3.  `post.njk` itself uses `layout: base.njk` (Chaining).

**Advanced Hybrid**:
You can use `{% extends %}` *inside* a layout file to create complex partials. For example, `post.njk` might include a partial that extends another partial. But generally, avoid mixing `layout:` front matter AND `{% extends %}` in the *same file* unless you fully understand the Nunjucks render order.

---

## 2.2.3.5 Performance Implications

*   **Inheritance** (`extends`) is handled natively by the Template Engine (Nunjucks). It is extremely fast and happens during a single render pass.
*   **Wrapping** (`layout: `) is handled by Eleventy. It involves multiple render passes (render content -> result -> render layout -> result).

For deep hierarchies (5+ layers), native Inheritance is theoretically faster. However, in most static sites (2-3 layers), the performance difference is negligible. You should prioritize developer ergonomics (ease of use) over micro-optimizations here.

---

## Quick Reference

| Concept | Key Point |
| :--- | :--- |
| **Wrappers** | Use `layout:` in front matter. Best for Markdown content. |
| **Extensions** | Use `{% extends %}` tags. Best for Nunjucks structural variations. |
| **Hybrid Rules** | Avoid using both `layout:` and `extends` in the same file. |
| **Complexity** | Wrapping is simpler (Nesting). Extending offers more power (Mutation). |
| **Speed** | Extending is slightly faster (single pass), but Wrapping is fast enough. |
