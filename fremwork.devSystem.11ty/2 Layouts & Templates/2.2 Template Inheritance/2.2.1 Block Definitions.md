# 2.2.1 Block Definitions

Block Definitions are the fundamental unit of **Template Inheritance** in Nunjucks (and similar template engines like Jinja2 or Django). While Eleventy's "Layout Chaining" wraps content from the outside in, **Blocks** allow you to define "slots" or "holes" in a template that child templates can fill, override, or append to.

This is the mechanism that powers complex, component-based architectures where a child page needs to control multiple distinct areas of the final HTML (e.g., the `<title>`, a sidebar, AND the main content).

---

## 2.2.1.1 The Concept: Slots and Fillers

Imagine a "Base Template" not as a complete picture, but as a form with blank spaces.
*   **The Block**: A named reserved space in the template.
*   **The Definition**: The default content that appears in that space if no one says otherwise.
*   **The Override**: When a child template says, "In the space named 'header', put *this* instead."

Unlike "Content Injection" (where `{{ content }}` is the only hole), Blocks allow for **Multiple Injection Points**.

---

## 2.2.1.2 Defining a Block: The Syntax

You define a block using the `block` tag. You typically do this in your parent layout (e.g., `base.njk`).

```html
<!-- _includes/base.njk -->
<!DOCTYPE html>
<html>
<head>
  <!-- A block for HEAD content (CSS, title) -->
  {% block head %}
    <title>Default Title</title>
  {% endblock %}
</head>
<body>

  <!-- A block for HEADER content -->
  {% block header %}
    <header>Default Header</header>
  {% endblock %}

  <main>
    <!-- A block for MAIN content -->
    {% block content %}
      <p>This is the default content.</p>
    {% endblock %}
  </main>

</body>
</html>
```

In this example, we have created three distinct "holes" in our layout: `head`, `header`, and `content`.

---

## 2.2.1.3 Default Content (Fallbacks)

Everything you type **between** `{% block name %}` and `{% endblock %}` is the **Default Content**.

If a child template extends this base but *does not* define a specific block, the parent's default content is rendered.

**Example**:
If a child only overrides `content`, the final HTML will still show `<title>Default Title</title>` and `<header>Default Header</header>`.

This allows you to create robust defaults. You can arguably put your entire generic site structure as "default content" and only force children to override the specific parts they need to change.

---

## 2.2.1.4 Block Scope and Context

Blocks have access to the data context they are rendered in.

*   **Global Data**: Available inside blocks.
*   **Front Matter**: Available inside blocks.

However, variables defined *inside* a block in a child template are generally scoped to that block.

**Important Note on Nunjucks**:
Blocks are evaluated at render time. They obey the "Super" rule (which we will cover in [[2.2.2 Extending Templates]]), allowing a child to say "Print the parent's default content AND then add my stuff."

---

## 2.2.1.5 Nested Blocks

You can nest blocks inside other blocks. This creates a granular hierarchy.

```html
{% block sidebar %}
  <div class="sidebar">
    {% block sidebar_top %}
       <!-- Default Top Widget -->
    {% endblock %}
    
    {% block sidebar_bottom %}
       <!-- Default Bottom Widget -->
    {% endblock %}
  </div>
{% endblock %}
```

A child template could choose to override the entire `sidebar` (wiping out the div and both inner blocks), OR it could just override `sidebar_top`, preserving the container and the bottom widget. This is extremely powerful for creating "Themeable" layouts.

---

## Summary Definitions

| Subtopic | Focus & Purpose | Key Concepts / Details | One-Line Recall |
| :--- | :--- | :--- | :--- |
| **2.2.1 Block Definitions** | Creating Slots | `{% block name %}`; defining holes in templates; multiple injection points | Create named holes for children to fill. |
| **[[2.2.1.1 Defining a Block]]** | Syntax | Open/Close tags; naming constraints; placement in `base.njk` | `{% block foo %}...{% endblock %}` |
| **[[2.2.1.2 Default Content]]** | Fallbacks | Content *inside* the block tags is the default; ensures nothing breaks if ignored | If you don't fill the hole, I will. |
| **[[2.2.1.5 Nested Blocks]]** | Granularity | Blocks inside blocks; allowing specific vs generic overrides | Holes inside holes for precision control. |
