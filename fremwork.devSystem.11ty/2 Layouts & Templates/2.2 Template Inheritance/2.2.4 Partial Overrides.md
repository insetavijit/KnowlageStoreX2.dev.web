| **Subtopic** | **Focus & Purpose** | **Key Concepts / Details** | **One-Line Recall** |
| :--- | :--- | :--- | :--- |
| **2.2.4 Partial Overrides** | Granular Control | Overriding bits and pieces; conditional overrides; flexibility | Change just one small part. |
| **[[2.2.4.1 Targeting Specifics]]** | Strategy | Defining small blocks for headers, buttons, metadata; surgical replacement | Replace the head, keep the body. |
| **[[2.2.4.2 The "Empty Block" Pattern]]** | Technique | Defining an empty block in parent; filling it only when needed (e.g., specific scripts) | A placeholder waiting for content. |
| **[[2.2.4.3 The "Default Block" Pattern]]** | Technique | Defining robust default content (like "Recent Posts") that can be wiped out | Defaults that are made to be broken. |
| **[[2.2.4.4 Conditional Overrides]]** | Logic | Using logic inside overrides; deciding *whether* to override | Override only if X is true. |
| **[[2.2.4.5 Maintenance Balance]]** | Best Practices | Not creating too many tiny blocks; Swiss Cheese anti-pattern | Too many holes make the template weak. |

# Surgical Precision: Partial Overrides

The true power of Template Inheritance lies in the ability to perform **Partial Overrides**. Unlike a Layout Wrapper which swallows the entire content whole, inheritance allows a child template to act like a surgeon, replacing specific organs (blocks) of the parent while leaving the rest of the body intact.

This capability transforms your templates from static "shells" into dynamic "systems" where specific pages can deviate from the norm without duplicating code.

---

## 2.2.4.1 Targeting Specifics

To make partial overrides effective, your Parent Template must be composed of granular blocks. A parent with one giant `{% block content %}` is barely better than a wrapper.

**Granular Parent (`base.njk`)**:
```html
<head>
  {% block meta %}...{% endblock %}
  {% block styles %}...{% endblock %}
</head>
<body>
  <header>{% block header %}...{% endblock %}</header>
  <main>{% block content %}...{% endblock %}</main>
  <aside>{% block sidebar %}...{% endblock %}</aside>
  <footer>{% block footer %}...{% endblock %}</footer>
</body>
```

**Surgical Child (`landing-page.njk`)**:
```html
{% extends "base.njk" %}

{# We only touch the header and sidebar. Logic for styles/footer remains untouched. #}
{% block header %}
  <h1>Special Landing Header</h1>
{% endblock %}

{% block sidebar %}
  <!-- Empty override removes the sidebar -->
{% endblock %}
```

By overriding just `header` and `sidebar`, the child inherits the complex meta tags, styles, and footer logic of the parent for free.

---

## 2.2.4.2 The "Empty Block" Pattern

A powerful pattern is defining **Empty Blocks** in your parent template. These act as "Optional Injection Points".

**Parent**:
```html
<!-- At the end of <body> -->
<script src="/main.js"></script>
{% block scripts %}{% endblock %}
```

By default, nothing renders there. But a specific page (e.g., a Data Visualization page) can inject a heavy charting library only where it's needed.

**Child (`charts.njk`)**:
```html
{% block scripts %}
  <script src="https://cdn.chartjs.org/d3.js"></script>
{% endblock %}
```

This keeps your global bundle size low while allowing exceptions.

---

## 2.2.4.3 The "Default Block" Pattern

Conversley, you can fill blocks with robust default content that is intended to be overwritten. A common use case is a "Recent Posts" sidebar.

**Parent**:
```html
{% block sidebar %}
  <h3>Recent Posts</h3>
  <ul>...</ul>
{% endblock %}
```

**Child (`about.njk`)**:
```html
{% block sidebar %}
  <h3>About the Author</h3>
  <p>Bio goes here...</p>
{% endblock %}
```

The child replaces the "Recent Posts" widget entirely with an "Author Bio" widget, without breaking the layout structure.

---

## 2.2.4.4 Conditional Overrides

You can use logic *inside* your overrides. Note that `{% extends %}` itself cannot be conditional, but the *contents* of your blocks can resolve differently based on data.

```html
{% block title %}
  {% if renderData.title %}
    {{ renderData.title }}
  {% else %}
    {{ title }} | My Site
  {% endif %}
{% endblock %}
```

This allows a single template to adapt its overrides based on the data context (e.g., showing a different title format for SEO-heavy pages).

---

## 2.2.4.5 Maintenance: The Swiss Cheese Anti-Pattern

While granular blocks are powerful, too many blocks create the **Swiss Cheese Anti-Pattern**.

If your `base.njk` is nothing but 50 separate `{% block %}` tags, it has no structure of its own. It's just a loose collection of holes. This makes it hard to change the global design later because every child template is effectively defining its own structure.

**Balance Rule**: Define blocks for *semantic regions* (Header, Footer, Main, Sidebar) and *functional injection points* (Scripts, Meta). Avoid defining blocks for every single H1, paragraph, or div.

---

## Quick Reference

| Concept | Key Point |
| :--- | :--- |
| **Granularity** | More blocks = more control, but higher complexity. |
| **Empty Blocks** | Use empty blocks in the parent as placeholders for optional child content. |
| **Removal** | Override a block with *nothing* to delete that section from the output. |
| **Scope** | Overrides only affect the specific block named; the rest of the parent remains. |
| **Stability** | Avoid the "Swiss Cheese" pattern (too many holes). |
