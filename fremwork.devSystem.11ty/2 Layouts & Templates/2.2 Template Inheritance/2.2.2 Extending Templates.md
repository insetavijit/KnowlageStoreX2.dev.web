# 2.2.2 Extending Templates

While "Layout Chaining" (wrapping) is the primary method of composition in Eleventy, **Template Inheritance** (extending) offers a more granular, programmatic way to build templates. This is primarily a feature of Nunjucks (and other rich template languages), allowing a child template to inherit a parent's structure and surgically replace specific parts of it.

If Layout Chaining is "putting a picture in a frame," Template Inheritance is "genetic cloning and mutation."

---

## 2.2.2.1 The Extends Tag

To trigger inheritance, a template must start with the `{% extends %}` tag. This tag declares the parent file.

**Crucial Rules:**
1.  It must be the **very first thing** in the file (excluding front matter).
2.  The path is relative to the `_includes` directory (just like standard layouts).

```html
<!-- _includes/layouts/home.njk -->
{% extends "layouts/base.njk" %}
```

Once a file extends another, **it prints nothing by default**. Variables outside of blocks are ignored. The only way to output content is to override a block defined in the parent.

---

## 2.2.2.2 Overriding Blocks

Once you extend a parent, you "fill in the holes" defined by that parent's `{% block %}` tags.

**Parent (`base.njk`):**
```html
<title>{% block title %}Default Title{% endblock %}</title>
<main>{% block content %}{% endblock %}</main>
```

**Child (`home.njk`):**
```html
{% extends "base.njk" %}

{% block title %}Home Page{% endblock %}

{% block content %}
  <h1>Welcome Home</h1>
  <p>This replaces the parent's content block completely.</p>
{% endblock %}
```

If the child does *not* define a block (e.g., if we omitted `block title`), the parent's default ("Default Title") is used.

**Empty Overrides:**
To remove content defined in a parent, simply define an empty block.
```html
{% block sidebar %}{% endblock %}
```
This effectively "deletes" the default sidebar from the parent for this specific child.

---

## 2.2.2.3 Using `super()`: Appending instead of Replacing

Sometimes you don't want to destroy the parent's content; you want to add to it. The `{{ super() }}` function renders the content of the parent block inside the child block.

**Scenario:** You have a default CSS file in your parent `<head>`, but the child needs *one more* specific CSS file.

**Parent:**
```html
{% block head %}
  <link rel="stylesheet" href="/style.css">
{% endblock %}
```

**Child:**
```html
{% block head %}
  {{ super() }} <!-- Prints <link rel="stylesheet" href="/style.css"> -->
  <link rel="stylesheet" href="/home-specific.css">
{% endblock %}
```

Without `{{ super() }}`, the `/style.css` link would disappear, and the site would lose its global styling.

---

## 2.2.2.4 Inheritance Chains

Inheritance can be multi-level: `Grandchild` extends `Child` extends `Parent`.

1.  **Base**: Defines the HTML skeleton.
2.  **Section Layout**: Extends Base, overrides `sidebar`, adds a `hero` block.
3.  **Page Layout**: Extends Section Layout, overrides `hero` and `content`.

Variables and blocks ripple down the chain. A grandchild can override a block defined in the grandparent, or use `super()` to obtain the combined content of the parent + grandparent.

---

## 2.2.2.5 Block Variables (Scoping)

A common point of confusion is variable scope.
*   **Outside Blocks**: Variables defined in the child (using `set`) are generally available to the parent context in Nunjucks.
*   **Inside Blocks**: Variables are often scoped to that block.

**Passing Data Up:**
If you want to set a variable in a child that the parent uses (e.g., setting an `active_nav` state), you can often do this via `set` before the blocks, or simply by using Front Matter (which is cleaner in Eleventy).

**Eleventy Preference**:
While Nunjucks inheritance is powerful, Eleventy's **Front Matter + Layout Chaining** is often simpler for passing data. Use `extends` primarily when you need to modify *structure* (HTML blocks), not just *data* (Titles/Authors).

---

## Summary Definitions

| Subtopic | Focus & Purpose | Key Concepts / Details | One-Line Recall |
| :--- | :--- | :--- | :--- |
| **2.2.2 Extending Templates** | Using Slots | `{% extends %}`; overriding blocks; inheritance model | **Fill** the holes the parent created. |
| **[[2.2.2.1 The Extends Tag]]** | Syntax | Must be first tag; relative to `_includes`; establishes the link | `{% extends "base.njk" %}` |
| **[[2.2.2.2 Overriding Blocks]]** | Customization | Redefining `{% block name %}`; replaces parent content entirely | Replace the default content. |
| **[[2.2.2.3 Using super()]]** | Appending | `{{ super() }}`; renders parent block content inside child | Keep the old AND add the new. |
| **[[2.2.2.4 Inheritance Chains]]** | Hierarchy | Multi-level extending; Grandparent -> Parent -> Child | Turtles all the way down. |
