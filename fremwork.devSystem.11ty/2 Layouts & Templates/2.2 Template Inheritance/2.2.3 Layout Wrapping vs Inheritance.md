# 2.2.3 Layout Wrapping vs. Inheritance

In Eleventy, you have two distinct ways to reuse templates: **Layout Wrapping** (the Eleventy way) and **Template Inheritance** (the Nunjucks/Liquid way). This duality often confuses developers.

*   **Layout Wrapping** used `layout: name.njk` in front matter.
*   **Template Inheritance** uses `{% extends "name.njk" %}` in the code.

They are not mutually exclusive, but they represent different mental models. Understanding when to use which is the key to a clean architecture.

---

## 2.2.3.1 Concept Comparison

| Feature | Layout Wrapping (Chaining) | Template Inheritance (Extending) |
| :--- | :--- | :--- |
| **Mechanism** | Front Matter (`layout:`) | Tag (`{% extends %}`) |
| **Direction** | **Outside-In** (Wrapper) | **Mixed** (super() calls) |
| **Injection** | `{{ content }}` only | Multiple named `{% block %}` areas |
| **Scope** | Child doesn't see Parent vars | Child/Parent share context more freely |
| **Analogy** | Matryoshka Dolls (Nesting) | Genetic Cloning (Mutation) |

**Layout Wrapping** is best for general document structure. It treats the inner content as a "blob" to be placed inside a container.

**Template Inheritance** is best for granular control. It allows the child to surgically alter specific parts of the parent (the title, the sidebar, the footer) while keeping the rest.

---

## 2.2.3.2 When to Wrap

Use **Layout Wrapping** for your primary content pages (Markdown files).

*   **Scenario**: Blog Posts, Documentation Pages, About Page.
*   **Why**: Markdown files cannot natively use `{% extends %}` easily without configuration tweaks. They are designed to produce a "content blob" that gets wrapped.
*   **Pattern**: `post.md` -> `layout: post.njk`.

**The Golden Rule**: If you are writing **Content** (Markdown), use Wrapping.

---

## 2.2.3.3 When to Extend

Use **Template Inheritance** for your layout files themselves.

*   **Scenario**: Creating variations of a landing page.
*   **Why**: You have a `marketing-base.njk`. You want a `pricing.njk` that is exactly the same, but with a different Hero section and no footer.
*   **Pattern**: `pricing.njk` starts with `{% extends "marketing-base.njk" %}` and overrides `{% block hero %}`.

**The Golden Rule**: If you are writing **Structure** (Nunjucks/HTML) and need to modify an existing template's internal slots, use Extending.

---

## 2.2.3.4 The Hybrid Approach (And Danger Zones)

You can mix them, but it requires care.

**Common Pattern**:
1.  `post.md` (Content) uses **Wrapping** -> `layout: post.njk`
2.  `post.njk` (Layout) uses **Inheritance** -> `{% extends "base.njk" %}` (Wait, careful!)

**The Trap**:
If `post.njk` uses `{% extends "base.njk" %}`, it is **NOT** a standard layout wrapper anymore. It is a child template.
Eleventy expects a layout wrapper (defined in front matter) to imply "Inject content here."
But `{% extends %}` implies "I am taking over rendering."

**Correct Hybrid Flow**:
1.  `post.md` uses `layout: post.njk`.
2.  `post.njk` does **NOT** use `extends`. It is a standard wrapper.
3.  `post.njk` itself might use `layout: base.njk` (Chaining).

**Advanced Hybrid**:
You can use `{% extends %}` *inside* a layout file to create complex partials, but avoid mixing `layout:` front matter AND `{% extends %}` in the *same file* unless you really understand the render order. Usually, a file should pick one strategy.

---

## 2.2.3.5 Performance Implications

*   **Inheritance** (`extends`) is handled natively by the Template Engine (Nunjucks). It is extremely fast and happens during a single render pass.
*   **Wrapping** (`layout: `) is handled by Eleventy. It involves multiple render passes (render content -> result -> render layout -> result).

For deep hierarchies (5+ layers), native Inheritance is theoretically faster, but for standard sites (2-3 layers), the difference is negligible. Prioritize developer ergonomics over micro-optimizations here.

---

## Summary Definitions

| Subtopic | Focus & Purpose | Key Concepts / Details | One-Line Recall |
| :--- | :--- | :--- | :--- |
| **2.2.3 Wrapping vs Inheritance** | Architecture | Chaining vs Extending; Outside-In vs Inside-Out | Wrappers nest; Extensions mutate. |
| **[[2.2.3.2 When to Wrap]]** | Content Strategy | Use `layout:` for Markdown and generic pages | Content gets wrapped. |
| **[[2.2.3.3 When to Extend]]** | Structure Strategy | Use `{% extends %}` for Layout-to-Layout variations | Layouts extend other layouts. |
| **[[2.2.3.4 Hybrid Approach]]** | Mixing | Creating a wrapper that extends another file (Complex!) | Don't cross the streams unless necessary. |
