| **Subtopic** | **Focus & Purpose** | **Key Concepts / Details** | **One-Line Recall** |
| :--- | :--- | :--- | :--- |
| **2.5.2 Configuring Markdown-it** | Library Setup | `setLibrary("md", lib)`; options object; customization | Tuning the engine. |
| **[[2.5.2.1 setLibrary API]]** | Override | Replacing the default instance with a configured one in `.eleventy.js` | Swap the engine. |
| **[[2.5.2.2 HTML Support]]** | Safety | `html: true`; allowing raw `<div class="foo">` tags | Enable mixed content. |
| **[[2.5.2.3 Typographer]]** | Presentation | `typographer: true`; smart quotes, en/em-dashes, ellipsis | `...` becomes `…` |
| **[[2.5.2.4 Linkify]]** | Convenience | `linkify: true`; auto-linking `https://` text found in paragraphs | Auto-link URLs. |
| **[[2.5.2.5 Breaks]]** | Formatting | `breaks: true`; converting newlines to `<br>` (GitHub style) | Enter key = Line break. |

# 2.5.2 Configuring Markdown-it

Eleventy comes with a default configuration of `markdown-it`. However, professional sites almost always need to override this default to enable advanced formatting features or specific HTML handling rules.

To customize Markdown processing, you do not pass a config object to Eleventy; you **create your own instance of the library** and tell Eleventy to use it.

---

## 2.5.2.1 The `setLibrary` API

In your `.eleventy.js` configuration file, you must require `markdown-it`, configure it, and potentially add plugins to it before passing it to Eleventy.

```javascript
// .eleventy.js
const markdownIt = require("markdown-it");

module.exports = function(eleventyConfig) {
  let options = {
    html: true,
    breaks: true,
    linkify: true
  };

  let markdownLib = markdownIt(options);
  
  // Tell 11ty to use YOUR instance, not the default
  eleventyConfig.setLibrary("md", markdownLib);
};
```

This "Swap the Library" pattern allows you full control over the parser.

---

## 2.5.2.2 HTML Support (`html: true`)

By default, Markdown parsers often escape raw HTML for security (to prevent XSS).
`<div>` becomes `&lt;div&gt;`.

For most static sites where *you* are the author, you want `html: true`. This allows you to mix HTML components seamlessly into your Markdown files.

```markdown
# My Page

<div class="custom-alert">
  This is a custom HTML block.
</div>
```

**Security Warning**: If your site builds content from untrusted user inputs (like comments), `html: true` is a massive security risk. Keep it `false` for user-generated content.

---

## 2.5.2.3 Typographer (`typographer: true`)

This option enables "Smartypants"-style replacement of common typographic elements.

*   `"Smart quotes"` (Straight quotes become curly quotes)
*   `...` -> `…` (Ellipsis)
*   `--` -> `–` (En-dash)
*   `---` -> `—` (Em-dash)

This subtle polish makes text look significantly more professional.

---

## 2.5.2.4 Linkify (`linkify: true`)

If enabled, any text that looks like a URL will be automatically converted into a link.

Input: `Visit https://11ty.dev`
Output: `Visit <a href="https://11ty.dev">https://11ty.dev</a>`

This is convenient for informal writing or comments, but standard Markdown links `[Text](url)` are preferred for accessibility (using descriptive link text).

---

## 2.5.2.5 Breaks (`breaks: true`)

By the strict CommonMark spec, a single newline in a paragraph is treated as a space. You must type **two spaces** at the end of a line to force a `<br>`.

If you prefer GitHub-style line breaks (where pressing Enter creates a `<br>`), set `breaks: true`.

*   **False (Default)**: Newlines = Space.
*   **True**: Newlines = `<br>`.

---

## Quick Reference

| Option | Default | Effect |
| :--- | :--- | :--- |
| `html` | `false` | Allow use of `<div>`, `<span>`, etc. |
| `xhtmlOut` | `false` | Use self-closing tags `<br />`. |
| `breaks` | `false` | Treat newlines as `<br>`. |
| `langPrefix` | `language-` | Class prefix for code blocks (`language-js`). |
| `linkify` | `false` | Auto-convert text URLs to links. |
| `typographer` | `false` | Smart quotes and dashes. |
