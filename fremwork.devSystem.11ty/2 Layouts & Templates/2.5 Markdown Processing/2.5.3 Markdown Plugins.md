| **Subtopic** | **Focus & Purpose** | **Key Concepts / Details** | **One-Line Recall** |
| :--- | :--- | :--- | :--- |
| **2.5.3 Markdown Plugins** | Ecosystem | `use()`; `markdown-it-anchor`; `markdown-it-attrs` | Enhancing the parser. |
| **[[2.5.3.1 Installing Plugins]]** | Setup | `npm install`; `md.use(plugin, options)` syntax | Add features via npm. |
| **[[2.5.3.2 Anchor Headings]]** | Navigation | `markdown-it-anchor`; automatic IDs for headings (`#my-id`) | Deep links for headings. |
| **[[2.5.3.3 Custom Attributes]]** | Styling | `markdown-it-attrs`; syntax: `{.class #id}`; adding metadata | `## Heading {.text-center}` |
| **[[2.5.3.4 Footnotes]]** | Content | `markdown-it-footnote`; `[^1]` syntax; auto-generating the list | Academic style notes. |
| **[[2.5.3.5 Table of Contents]]** | Navigation | `markdown-it-toc-done-right`; `[[toc]]`; generates `<ul>` of headers | Auto-generated TOC. |

# 2.5.3 Markdown Plugins

One of the reasons Eleventy chose `markdown-it` is its massive plugin ecosystem. Almost any feature you can imagine (MathJax, ASCII art, Diagrams, Container Blocks) has a `markdown-it` plugin.

To use them, you must install the npm package and then tell your custom Library instance to `.use()` it.

---

## 2.5.3.1 Installing & Registering

**Step 1: Install**
```bash
npm install markdown-it-anchor markdown-it-attrs
```

**Step 2: Register in `.eleventy.js`**
```javascript
const markdownIt = require("markdown-it");
const markdownItAnchor = require("markdown-it-anchor");
const markdownItAttrs = require("markdown-it-attrs");

module.exports = function(eleventyConfig) {
  let mdOptions = { html: true };
  let mdLib = markdownIt(mdOptions)
    .use(markdownItAnchor, { permalink: true }) // Plugin 1
    .use(markdownItAttrs);                     // Plugin 2
  
  eleventyConfig.setLibrary("md", mdLib);
};
```

---

## 2.5.3.2 Anchor Headings

The `markdown-it-anchor` plugin is essential for documentation sites. It automatically adds an `id` to every heading so you can direct link to it (`example.com/#my-heading`).

**Config Options**:
*   `slugify`: Custom function to determine how the ID string is generated.
*   `permalink`: If `true`, adds a visible symbol (Â¶ or #) next to the heading.

---

## 2.5.3.3 Custom Attributes (`markdown-it-attrs`)

This is arguably the most useful plugin for designers. It allows you to add CSS classes, IDs, and data attributes to Markdown elements using curly braces `{}`.

**Syntax**:
```markdown
# My Title {.text-center .text-primary}

This paragraph is special. {.alert .alert-info}

[Click Me](url){target="_blank"}
```

**Output**:
```html
<h1 class="text-center text-primary">My Title</h1>
<p class="alert alert-info">This paragraph is special.</p>
<a href="url" target="_blank">Click Me</a>
```

Without this plugin, you would have to write raw HTML every time you needed a specific class.

---

## 2.5.3.4 Footnotes (`markdown-it-footnote`)

Adds standard academic footnote support.

**Syntax**:
```markdown
Here is a statement.[^1]

[^1]: This is the footnote text.
```

The plugin automatically:
1.  Replaces `[^1]` with a superscript link.
2.  Appends an `<hr>` and an ordered list of footnotes to the bottom of your content.

---

## 2.5.3.5 Table of Contents

Several plugins handle TOCs, but `markdown-it-toc-done-right` is a solid choice. It looks for a specific symbol (like `[[toc]]`) and replaces it with a nested unordered list of all headings found in the document.

*Note*: Many developers prefer to generate TOCs using Eleventy's `content` string parsing rather than a Markdown plugin, as it gives more control over where the TOC is placed in the layout.

---

## Quick Reference

| Plugin | Purpose | Syntax |
| :--- | :--- | :--- |
| **anchor** | IDs on Headers | Automatic |
| **attrs** | Classes/IDs | `{.class #id}` |
| **footnote** | Footnotes | `[^1]` |
| **container** | Custom Blocks | `::: warning ... :::` |
| **katex** | Math MathML | `$ E=mc^2 $` |
