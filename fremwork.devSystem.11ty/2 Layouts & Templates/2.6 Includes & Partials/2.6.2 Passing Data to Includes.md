| **Subtopic** | **Focus & Purpose** | **Key Concepts / Details** | **One-Line Recall** |
| :--- | :--- | :--- | :--- |
| **2.6.2 Passing Data to Includes** | Component Pattern | Implicit Context vs Explicit Props | Making components reusable. |
| **[[2.6.2.1 Implicit Inheritance]]** | Default | Partials inherit *all* parent variables automatically | Parents share everything. |
| **[[2.6.2.2 Explicit Props (Nunjucks)]]** | Syntax | `{% include "x", {key: "val"} %}`; Isolated data passing | Sending a data package. |
| **[[2.6.2.3 Explicit Props (Liquid)]]** | Syntax | `{% include "x", key: "val" %}`; Differences in argument format | Liquid's prop style. |
| **[[2.6.2.4 Variable Shadowing]]** | Scope | Passed props override global variables of the same name | Local beats global. |
| **[[2.6.2.5 The Loop Scope]]** | Iteration | Including inside a loop automatically passes the loop item | `for` loops share context. |

# 2.6.2 Passing Data to Includes

The difference between a "Partial" and a "Component" is often just how you handle data.
*   **Partial**: A chunk of code that assumes certain variables exist globally (e.g., a Sidebar that assumes `collections.posts` exists).
*   **Component**: A chunk of code that is agnostic to the global state and relies on data passed to it (e.g., a Card that accepts `title` and `url`).

---

## 2.6.2.1 Implicit Inheritance

By default, standard Includes in both Nunjucks and Liquid inherit the **entire context** of the parent.

**`index.njk`**:
```html
{% set title = "Hello World" %}
{% include "header.njk" %}
```

**`_includes/header.njk`**:
```html
<h1>{{ title }}</h1> <!-- Outputs: Hello World -->
```

This is convenient for things like Site Headers but bad for reusable UI components because it creates a hidden dependency.

---

## 2.6.2.2 Explicit Props (Nunjucks)

To make a component reusable, you should pass data explicitly. In Nunjucks, you pass a single object as the second argument.

**Usage**:
```html
{% include "components/card.njk", { 
  title: "My Feature", 
  icon: "star" 
} %}
```

**Component (`card.njk`)**:
```html
<div class="card">
  <i class="icon-{{ icon }}"></i>
  <h2>{{ title }}</h2>
</div>
```

Now `card.njk` can be used anywhere, regardless of what the "global page title" is.

---

## 2.6.2.3 Explicit Props (Liquid)

Liquid has a slightly different syntax. You pass named arguments separated by commas, **without** wrapping them in an object braces `{}`.

**Usage**:
```liquid
{% include "components/card.liquid", title: "My Feature", icon: "star" %}
```

*Note*: If you are migrating from Jekyll, Jekyll uses `key="value"` (no comma). Standard Liquid uses `key: "value"` (colon + comma). Be careful here.

---

## 2.6.2.4 Variable Shadowing

When you pass data explicitly, it **shadows** (overrides) any global variable with the same name.

**Global Context**: `title = "Page Title"`

**Include**:
```html
{% include "heading.njk", { title: "Component Title" } %}
```

Inside `heading.njk`, `{{ title }}` will be "Component Title".
Once the include finishes, the global `title` remains "Page Title".

---

## 2.6.2.5 The Loop Scope

A common pattern is including a component inside a loop.

```html
{% for post in collections.posts %}
  {% include "components/post-card.njk" %}
{% endfor %}
```

Inside `post-card.njk`, you have access to `post` automatically because the loop variable `post` is part of the context passed to the include.

**Refactoring for Cleanliness**:
However, it is often cleaner to map the loop variable to a generic prop name:

```html
{% include "components/card.njk", { 
  title: post.data.title, 
  url: post.url 
} %}
```

This effectively decouples `card.njk` from the specific structure of a "post" object.

---

## Quick Reference

| Engine | Syntax | Note |
| :--- | :--- | :--- |
| **Nunjucks** | `{% include "f", {k: v} %}` | Needs Object Syntax `{}`. |
| **Liquid** | `{% include "f", k: v %}` | Needs Colon Syntax `k: v`. |
| **Shadowing** | **Yes** | Local props override globals. |
| **Context** | **Inherited** | Partials see parent vars by default. |
