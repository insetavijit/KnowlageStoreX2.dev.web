| **Subtopic** | **Focus & Purpose** | **Key Concepts / Details** | **One-Line Recall** |
| :--- | :--- | :--- | :--- |
| **2.4.3 Iteration & Logic** | Control Flow | Loops (`for`, `tablerow`) and Branches (`if`, `unless`, `case`) | Directing the traffic. |
| **[[2.4.3.1 For Loops]]** | Repetition | `{% for item in collection %}`; `limit`, `offset`, `reversed` | Repeat for every item. |
| **[[2.4.3.2 Loop Object]]** | Context | `forloop.index`, `forloop.rindex`, `forloop.first` | Knowing loop position. |
| **[[2.4.3.3 The Unless Tag]]** | Inverse Logic | `{% unless x %}` = `{% if !x %}`; semantic readability | "Do this UNLESS that happens" |
| **[[2.4.3.4 Case Switch]]** | Selection | `{% case variable %}` `{% when "A" %}`; cleaner than nested ifs | Choosing from many options. |
| **[[2.4.3.5 TableRow]]** | Generators | `{% tablerow %}`; creates `<tr>` and `<td>` automatically | Instant HTML tables. |

# 2.4.3 Iteration & Logic

Liquid has a small but powerful set of control flow tags. The philosophy is to provide just enough logic to handle display needs without allowing complex business logic to creep into the template.

---

## 2.4.3.1 For Loops

Iteration is the primary mechanism for displaying collections.

```liquid
{% for post in collections.posts limit:5 offset:1 reversed %}
  <h2>{{ post.data.title }}</h2>
{% else %}
  <!-- Runs if the collection is empty -->
  <p>No posts found</p>
{% endfor %}
```

**Modifiers**:
*   `limit:5` (Only show 5)
*   `offset:1` (Skip the first one)
*   `reversed` (Flip the order)

---

## 2.4.3.2 Loop Object (`forloop`)

Liquid provides a `forloop` object (similar to Nunjucks `loop`) but with slightly different property names.

*   `forloop.index` (1-based index)
*   `forloop.index0` (0-based index)
*   `forloop.rindex` (Reverse 1-based index: counts down to 1)
*   `forloop.first` (Boolean)
*   `forloop.last` (Boolean)
*   `forloop.length` (Total count)

---

## 2.4.3.3 The `unless` Tag

Liquid provides a semantic inversion of `if` called `unless`.

**Compare**:
```liquid
{% if user.isLoggedIn != true %}
  <button>Log In</button>
{% endif %}
```

**With Unless**:
```liquid
{% unless user.isLoggedIn %}
  <button>Log In</button>
{% endunless %}
```

It reads more like English logic. "Show the login button **unless** the user is logged in."

---

## 2.4.3.4 Case / When

For checking a variable against multiple values, `case` is cleaner than `elsif`.

```liquid
{% case page.layout %}
  {% when "post" %}
     This is a blog post.
  {% when "product" %}
     This is a product page.
  {% else %}
     This is a generic page.
{% endcase %}
```

---

## 2.4.3.5 TableRow (The "Grid" Generator)

Liquid has a unique tag designed specifically for generating HTML tables from data. It handles the `<tr>` and `<td>` structure automatically, including breaking rows after a certain number of columns.

```liquid
<table>
  {% tablerow product in collection.products cols:3 %}
    {{ product.title }}
  {% endtablerow %}
</table>
```

This will output `<tr>` tags every 3 items. It is extremely useful for image galleries or product grids.

---

## Quick Reference

| Tag | Syntax / Note |
| :--- | :--- |
| `for` | `{% for x in y %}` |
| `else` (For) | Runs if loop is empty. |
| `unless` | Executed if condition is **false**. |
| `case` | Switch statement for multiple values. |
| `tablerow` | Generates HTML table rows/cols automatically. |
