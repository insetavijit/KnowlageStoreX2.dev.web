| **Subtopic** | **Focus & Purpose** | **Key Concepts / Details** | **One-Line Recall** |
| :--- | :--- | :--- | :--- |
| **2.4.4 Assignments & Capture** | Variable Management | `assign`, `capture`, `increment` | Creating and storing data. |
| **[[2.4.4.1 The Assign Tag]]** | Creation | `{% assign myVar = "val" %}`; defining simple variables | var x = y |
| **[[2.4.4.2 The Capture Tag]]** | Complex | `{% capture myVar %}...{% endcapture %}`; storing compiled HTML | Turn a block into a string. |
| **[[2.4.4.3 Increment/Decrement]]** | Counters | `{% increment counter %}`; Independent counters (not normal vars) | Count up. |
| **[[2.4.4.4 Variable Scope]]** | Visibility | Assignments persist globally within the render context | Liquid vars stick around. |
| **[[2.4.4.5 Modifying Variables]]** | Reassignment | `{% assign x = x \| append: "y" %}`; Standard pattern for modification | Updating the value. |

# 2.4.4 Assignments & Capture

While front matter provides the initial data context, templates often need to create their own local variables to manage logic, loops, and repetitive strings. Liquid offers two main ways to do this (`assign` and `capture`) and one confusing way (`increment`).

---

## 2.4.4.1 The Assign Tag

`assign` is for simple values: Strings, Numbers, Booleans, or referencing existing objects.

```liquid
{% assign hero_image = "banner.jpg" %}
{% assign show_sidebar = true %}
{% assign post_count = collections.posts | size %}
```

Once assigned, `{{ hero_image }}` behaves exactly like a front matter variable.

---

## 2.4.4.2 The Capture Tag

`capture` is used when you need to assign a complex string, typically involving other variables or HTML structure.

```liquid
{% capture full_name %}
  {{ user.first_name }} {{ user.middle_name }} {{ user.last_name }}
{% endcapture %}

<h1>Hello, {{ full_name }}</h1>
```

**Common Pattern**: Capturing a complex computed CSS class string to keep your HTML clean.

```liquid
{% capture classes %}
  btn
  {% if is_primary %}btn-primary{% endif %}
  {% if is_large %}btn-lg{% endif %}
{% endcapture %}

<button class="{{ classes | strip_newlines }}">Click Me</button>
```

---

## 2.4.4.3 Increment & Decrement (The Trap)

Liquid has `{% increment counter %}` and `{% decrement counter %}` tags.

**The Trap**: These tags do **NOT** affect variables created with `assign`. They create a separate, isolated counter object.

```liquid
{% assign myNum = 10 %}
{% increment myNum %} <!-- Prints 0 (starts separate counter) -->
{% increment myNum %} <!-- Prints 1 -->

{{ myNum }} <!-- Prints 10 (Original variable is unchanged!) -->
```

Because of this confusion, **avoid `increment`** for standard variable math. Use `assign` with the `plus` filter instead if you need to perform math on a variable.

**Use Case**: Generating unique IDs for widgets on a page where you don't care about the specific number, just uniqueness.

---

## 2.4.4.4 Variable Scope

In Liquid, variables assigned inside `if` blocks or `for` loops generally leak out into the surrounding scope (unlike Nunjucks).

```liquid
{% if true %}
  {% assign color = "red" %}
{% endif %}

{{ color }} <!-- Output: "red" -->
```

This makes "returning" values from logic blocks easier but requires you to be careful about variable naming collisions.

---

## 2.4.4.5 Modifying Variables

Liquid variables are immutable in the sense that you cannot do `x += 1`. You must re-assign the variable to itself with a filter.

```liquid
{% assign count = 1 %}
{% assign count = count | plus: 1 %}
```

This pattern of `assign x = x | filter` is the standard way to manipulate data.

---

## Quick Reference

| Tag | Purpose | Note |
| :--- | :--- | :--- |
| `assign` | Simple values | `{% assign x = 1 %}` |
| `capture` | Complex strings | Captures everything between tags. |
| `increment` | Isolated Counter | **Does not** modify `assign` vars. |
| `scope` | Leaky | Vars inside `if/for` are visible outside. |
