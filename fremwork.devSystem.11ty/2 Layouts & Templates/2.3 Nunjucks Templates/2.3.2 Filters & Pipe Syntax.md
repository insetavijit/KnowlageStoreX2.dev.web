| **Subtopic** | **Focus & Purpose** | **Key Concepts / Details** | **One-Line Recall** |
| :--- | :--- | :--- | :--- |
| **2.3.2 Filters & Pipe Syntax** | Transformation | Pipe operator `\|`; chaining; argument passing | Modifying output data. |
| **[[2.3.2.1 The Pipe Operator]]** | Syntax | Passing data from left to right: `{{ name \| upper }}` | Data flows through pipes. |
| **[[2.3.2.2 Built-in Filters]]** | Toolkit | `safe`, `replace`, `length`, `first`, `last`, `join` | Standard Nunjucks tools. |
| **[[2.3.2.3 11ty Specific Filters]]** | Extras | `slugify`, `url`, `log`; added by Eleventy core | Special tools from 11ty. |
| **[[2.3.2.4 Chaining Filters]]** | Composition | Applying multiple filters: `{{ date \| date("Y") \| safe }}` | Stack transformations. |
| **[[2.3.2.5 Custom Filters]]** | Extension | Adding JS functions in `.eleventy.js` as filters | Creating your own tools. |

# 2.3.2 Filters & Pipe Syntax

Filters are arguably the most robust feature in Nunjucks/Eleventy. They allow you to **separate Logic from Data**. Instead of storing pre-formatted HTML in your database or Markdown (e.g., storing a date as "January 1st, 2024"), you store usage-agnostic raw data (`2024-01-01`) and use **Filters** to format it at the last possible moment (`{{ date | postDate }}`).

---

## 2.3.2.1 The Pipe Operator (`|`)

The Pipe Operator passes the output of the expression on the left as the **first argument** to the function on the right.

```html
{{ "hello" | upper }}
<!-- Output: "HELLO" -->
```

If the filter accepts arguments, they are passed inside parentheses:

```html
{{ "hello world" | replace("world", "eleventy") }}
<!-- Output: "hello eleventy" -->
```

*Mental Model*: Think of it like a factory assembly line. The raw material enters on the left, goes through a machine (filter), and comes out modified on the right.

---

## 2.3.2.2 Built-in Filters (The Standard Library)

Nunjucks comes with a powerful standard library.

*   `{{ content | safe }}`: Prevents HTML escaping. (Crucial for Layouts).
*   `{{ list | join(", ") }}`: Turns an array `['a','b']` into "a, b".
*   `{{ string | replace("a", "b") }}`: Simple string replacement.
*   `{{ item | default("fallback") }}`: If item is undefined, output "fallback".
*   `{{ array | first }}` / `{{ array | last }}`: Grabs specific items.

---

## 2.3.2.3 Chaining Filters

You can chain an infinite number of filters together. They execute **left to right**.

```html
{{ "  HeLLo World  " | trim | lower | replace("world", "universe") }}
```

1.  `"  HeLLo World  "` (Raw)
2.  `| trim` -> `"HeLLo World"`
3.  `| lower` -> `"hello world"`
4.  `| replace` -> `"hello universe"`

**Order Matters**:
`{{ array | join | upper }}` is valid (Array -> String -> Uppercase).
`{{ array | upper | join }}` will likely fail or output weirdness because `upper` expects a string, not an array.

---

## 2.3.2.4 Eleventy-Specific Filters

Eleventy injects a few essential filters into the Nunjucks environment automatically:

*   `slugify`: Transforms "My Cool Title!" into "my-cool-title". (Great for IDs).
*   `url`: Normalizes paths (handling `pathPrefix`).
*   `log`: Dumps the variable to the console (node terminal) for debugging.

---

## 2.3.2.5 Custom Filters (The Superpower)

The real power of Eleventy is the ability to write JavaScript functions and expose them as filters.

**`eleventy.config.js`**:
```javascript
export default function(eleventyConfig) {
  eleventyConfig.addFilter("readableDate", (dateObj) => {
    return dateObj.toLocaleDateString("en-US", {
      year: "numeric", month: "long", day: "numeric" 
    });
  });
};
```

**Template Usage**:
```html
{{ page.date | readableDate }}
<!-- Output: January 1, 2024 -->
```

This keeps your templates clean (`{{ date | readableDate }}`) while hiding complex JavaScript logic in your configuration file.

---

## Quick Reference

| Concept | Key Point |
| :--- | :--- |
| **Pipes** | `\|` passes data from Left -> Right. |
| **Logic Separation** | Keep templates for HTML, put logic in Filters. |
| **Safe** | Use `\| safe` for any HMTL content you want rendered as markup. |
| **Chaining** | Combine small filters to create complex transformations. |
| **Custom** | `eleventyConfig.addFilter()` is your best friend for clean code. |
