| **Subtopic** | **Focus & Purpose** | **Key Concepts / Details** | **One-Line Recall** |
| :--- | :--- | :--- | :--- |
| **2.3.5 Includes & Imports** | Composition | `include` (rendering) vs `import` (macros); scope diffs | Bringing code together. |
| **[[2.3.5.1 The Include Tag]]** | Partials | `{% include "file.njk" %}`; inheriting context; outputting HTML | Paste code here. |
| **[[2.3.5.2 Implicit vs Explicit Scope]]** | Context | `include` shares variables automatically; `import` does not | Includes share, Imports isolate. |
| **[[2.3.5.3 Passing Data to Includes]]** | Data | `{% include "x", {foo: "bar"} %}`; overriding variable creation | Sending props to a child. |
| **[[2.3.5.4 Advanced Imports]]** | Namespacing | `{% import "forms.njk" as f %}`; organizing macros | Keep your functions organized. |
| **[[2.3.5.5 The `ignore missing` flag]]** | Robustness | `{% include "x" ignore missing %}`; preventing crashes | Don't fail if the file is gone. |

# 2.3.5 Includes & Imports

A modular system requires the ability to split code into smaller files. Nunjucks provides two distinct mechanisms for this: **Includes** and **Imports**.

*   **Include**: "Render this file right here and give it access to my variables."
*   **Import**: "Load functions/macros from this file, but don't execute anything yet, and keep its variables private."

---

## 2.3.5.1 The Include Tag

The `{% include %}` tag is the simplest way to reuse code. It effectively copy-pastes the contents of the target file into the current file at render time.

```html
<header>
  {% include "partials/nav.njk" %}
</header>
```

**Scope Inheritance**:
The included file (`nav.njk`) has access to **all** variables available in the parent. If the parent has `{{ title }}`, the child can print `{{ title }}` without you passing it explicitly.

---

## 2.3.5.2 Passing Data to Includes

While implicit scope is convenient, it can be magic. To write reusable components, it is better to pass data explicitly.

```html
<!-- Explicitly passing a variable -->
{% include "components/card.njk", { title: "Hello", description: "World" } %}
```

In `card.njk`:
```html
<div class="card">
  <h2>{{ title }}</h2> <!-- Uses the passed value "Hello" -->
</div>
```

This pattern makes `card.njk` a pure component that doesn't rely on the global state of the page.

---

## 2.3.5.3 Imports (For Macros)

As discussed in **[[2.3.4 Macros]]**, `{% import %}` is specifically for loading macros. Unlike `include`, an imported file does **not** output HTML immediately. It just makes the macros available to be called.

**Crucial Difference**: Imported files do **not** inherit the parent's context (variables). This isolation is by design to ensure macros are pure functions.

---

## 2.3.5.4 The "Ignore Missing" Flag

Sometimes a partial is optional. For example, specific pages might have a `custom-scripts.njk` file. You don't want the build to fail if that file doesn't exist.

```html
{% include "partials/custom-scripts.njk" ignore missing %}
```

If the file is found, it renders. If not, Nunjucks silently continues without error.

---

## 2.3.5.5 Dynamic Includes

You can use a variable for the include path, just like with Layouts.

```html
{% set myPartial = "partials/" + currentType + ".njk" %}
{% include myPartial %}
```

This allows for polymorphic rendering where you loop through a list of items and render a different partial based on the item type (`card-video.njk`, `card-text.njk`, etc.).

---

## Quick Reference

| Command | Action | Scope |
| :--- | :--- | :--- |
| **Include** | `{% include "f.njk" %}` | Inherits Parent Scope (Shares vars) |
| **Import** | `{% import "f.njk" as x %}` | Isolated Scope (Private context) |
| **Pass Data** | `{% include "f", {x: 1} %}` | Overrides/Augments context for that include only. |
| **Ignore** | `ignore missing` | Prevents errors on missing files. |
