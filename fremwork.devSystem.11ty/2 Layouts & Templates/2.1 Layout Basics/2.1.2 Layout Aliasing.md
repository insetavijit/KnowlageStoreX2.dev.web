# Layout Aliasing: The Strategic Indirection Layer

Layout Aliasing in Eleventy is a configuration feature that creates a map between a short, semantic name (e.g., `post`) and a specific file path (e.g., `layouts/blog/single-post.njk`). It acts as an **indirection layer** that decouples your content files from your template's physical file structure.

---

## The Core Problem: Tightly Coupled Paths

Without aliases, your content files are tightly coupled to the specific location of your layouts.

```markdown
<!-- posts/hello.md -->
---
layout: layouts/blog-2024/main-post-v2.njk
title: "Hello World"
---
```

If you have 500 blog posts and you decide to reorganize your `_includes` folder or rename `main-post-v2.njk` to `article.njk`, you have to find and replace that string in **500 files**. This is "shotgun surgery"â€”a single conceptual change requiring edits in many places.

**Layout Aliasing solves this.** You define the relationship *once* in your configuration, and your content simply refers to the alias.

---

## Implementing Aliases: `addLayoutAlias`

Aliases are defined in your `.eleventy.js` (or `.eleventy.cjs`) configuration file using the `addLayoutAlias` method.

```javascript
// eleventy.config.js
module.exports = function(eleventyConfig) {
  
  // Syntax: .addLayoutAlias("alias-name", "path/relative/to/_includes")
  
  eleventyConfig.addLayoutAlias("post", "layouts/blog/post.njk");
  eleventyConfig.addLayoutAlias("default", "layouts/base.njk");
  eleventyConfig.addLayoutAlias("home", "layouts/landing-page.njk");

};
```

Now, your content files become clean and semantic:

```markdown
---
layout: post
title: "Hello World"
---
```

When Eleventy processes this file:
1. It sees `layout: post`.
2. It checks its internal alias map.
3. It resolves `post` to `layouts/blog/post.njk`.
4. It loads `_includes/layouts/blog/post.njk`.

---

## The Refactoring Superpower

The true power of aliases reveals itself when you need to refactor.

**Scenario**: You want to move all blog layouts from `_includes/layouts/` to `_includes/components/blog/` and rename `post.njk` to `entry.njk`.

**Without Aliases**:
- Find/Replace in 500 markdown files.
- Risk missing one or introducing typos.

**With Aliases**:
- Change **one line** in `eleventy.config.js`:

```javascript
// Old
// eleventyConfig.addLayoutAlias("post", "layouts/post.njk");

// New
eleventyConfig.addLayoutAlias("post", "components/blog/entry.njk");
```

Your 500 content files remain untouched. They still ask for `post`, and Eleventy simply hands them the new file. This makes your site architecture incredibly malleable.

---

## Best Practices & Naming Conventions

### 1. Use Semantic Names
Name aliases based on the **content type** or **role**, not the visual appearance.
- **Good**: `post`, `page`, `project`, `product`
- **Bad**: `two-column-blue`, `sidebar-left`

If you redesign the site and the "two-column" layout becomes a "card grid", the name `two-column-blue` becomes a lie. `project` remains true regardless of design.

### 2. The "Default" Alias
It's common practice to alias your most used layout to `default`.

```javascript
eleventyConfig.addLayoutAlias("default", "layouts/base.njk");
```

### 3. Verification
If you try to use an alias that hasn't been defined, Eleventy will throw the standard "Layout not found" error, referencing the alias name.

```
Error: You're trying to use a layout that does not exist: post (undefined)
```

This confirms that Eleventy looked for a file literally named `post` (or `post.*`) and failed, because it didn't find it in the alias map or the file system.

---

## Comparison: Alias vs. Direct Path

| Feature | Direct Path (`layouts/post.njk`) | Alias (`post`) |
| :--- | :--- | :--- |
| **Setup** | Zero config required. | Requires `addLayoutAlias` in config. |
| **Front Matter** | Detailed, exposes file structure. | Clean, semantic. |
| **Refactoring** | **Hard**: Edit every content file. | **Easy**: Edit config only. |
| **Portability** | File-structure dependent. | Architecture independent. |
| **Typing** | Prone to path typos. | Short, easy to remember. |

---

## Quick Reference

| Concept | Key Detail |
| :--- | :--- |
| **Method** | `eleventyConfig.addLayoutAlias(name, path)` |
| **Path Origin** | Relative to your `_includes` directory. |
| **Content Usage** | `layout: name` in front matter. |
| **Priority** | Aliases are checked before file system lookups. |
| **Primary Benefit** | Decoupling content from file structure (Refactoring safety). |

---

_Layout Aliasing is the hallmark of a mature Eleventy project. It separates **intent** (I want this to look like a post) from **implementation** (This layout lives in `_includes/v2/blog/post.njk`)._
