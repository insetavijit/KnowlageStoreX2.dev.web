# 2.1.3 Directory Specific Layouts

Directory Specific Layouts allow you to apply a default layout to every single file within a specific folder (and its subfolders). This is a powerful feature of Eleventy's Data Cascade that drastically reduces repetition and ensures consistency across sections of your site, such as a blog, documentation, or product catalog.

Instead of adding `layout: post.njk` to the front matter of hundreds of markdown files, you define it once at the directory level.

---

## 2.1.3.1 Directory Data Files: The Mechanism

The mechanism behind this feature is **Directory Data Files**. Eleventy looks for a data file that shares the same name as the directory it resides in.

If you have a directory structure like this:

```
src/
└── blog/
    ├── post-1.md
    ├── post-2.md
    └── blog.json  <-- Directory Data File
```

Any data defined in `blog.json` will automatically be applied to `post-1.md`, `post-2.md`, and any other template file inside `src/blog/`.

There are two supported formats:
1.  **JSON (`folder.json`)**: Static data, simple key-value pairs. Best for configuration.
2.  **JavaScript (`folder.11tydata.js`)**: Dynamic data, functions, or computed properties. Best for logic.

---

## 2.1.3.2 Setting the Layout Key

To set a default layout, you simply define the `layout` key in your directory data file.

**Using JSON (`src/blog/blog.json`):**
```json
{
  "layout": "layouts/post.njk",
  "tags": ["post", "blog"]
}
```

**Using JavaScript (`src/blog/blog.11tydata.js`):**
```javascript
module.exports = {
  layout: "layouts/post.njk",
  tags: ["post", "blog"]
};
```

Once this file exists, you can remove the `layout` key from the individual markdown files in that directory. They will inherit it automatically.

---

## 2.1.3.3 Cascade Priority

It is crucial to understand where Directory Data sits in the **Data Cascade**. The priority order (from lowest to highest) is:

1.  Global Data
2.  **Directory Data**
3.  Front Matter (in the specific file)

This means **Front Matter wins**.

If you have a default layout set in `blog.json`, but one specific post has a unique design requirement, you can override the default by simply adding a `layout` key to that specific file's front matter.

**`src/blog/special-post.md`**:
```markdown
---
layout: layouts/special-feature.njk
---
This post uses the special layout, ignoring the directory default.
```

This "Specific Overrides General" principle makes directory layouts safe to use; you are never locked in.

---

## 2.1.3.4 Practical Use Case

The most common use case is managing distinct sections of a website that have different visual structures.

**Scenario**: A site with a Marketing landing page, a Blog, and Documentation.

1.  **The Root**: `src/index.md` uses `layout: home`.
2.  **The Blog**: `src/blog/blog.json` sets `layout: post`. All posts get the sidebar and author bio automatically.
3.  **The Docs**: `src/docs/docs.json` sets `layout: doc-page`. All docs get the table of contents and version selector.

This structure allows you to move a file from `drafts/` to `blog/` and have it instantly "adopt" the blog's styling without editing the file itself.

---

## 2.1.3.5 Troubleshooting Scope

If your directory layout isn't applying, check these common pitfalls:

1.  **Filename Mismatch**: The data file MUST match the folder name exactly.
    *   `src/posts/post.json` (WRONG - mismatch)
    *   `src/posts/posts.json` (CORRECT)

2.  **Location**: The file must be *inside* the folder, not above it.
    *   `src/posts.json` (Applies to `src/posts.md` if it exists, not the folder `src/posts/`)
    *   `src/posts/posts.json` (Applies to files inside `src/posts/`)

3.  **Recursion**: Directory data applies to subdirectories too. If you have `src/blog/2024/`, the data from `src/blog/blog.json` cascades down into `src/blog/2024/`. You don't need to repeat it unless you want to change it.

---

## Summary

Directory Specific Layouts act as a context provider for your content. By defining the "environment" of a folder, you decouple your content from its presentation configuration, leading to a cleaner, DRYer codebase.
