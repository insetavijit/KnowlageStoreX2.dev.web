# 2.1.6 Layout Best Practices

Layouts are the infrastructure of your Eleventy site. Like physical infrastructure, if they are built poorly, maintenance becomes a nightmare, and renovations (redesigns) become impossible. If built well, they are invisible, supporting massive scale without friction.

This section outlines the architectural patterns that distinguish a professional project from a hobbyist experiment.

---

## 2.1.6.1 Naming Conventions: Semantic vs. Visual

The most common mistake in layout architecture is naming layouts after what they *look like* rather than *what they are*.

*   **Bad (Visual Naming):** `sidebar-left.njk`, `full-width-blue.njk`, `three-column.njk`.
*   **Good (Semantic Naming):** `post.njk`, `landing-page.njk`, `product.njk`, `doc-entry.njk`.

**Why?**
Design changes frequently. Content purposed rarely does. If you rename your "left sidebar" layout to a "bottom grid" layout during a redesign, you now have a file named `sidebar-left.njk` that outputs a bottom grid. This cognitive dissonance causes bugs.
Named semantically (`post.njk`), the file remains accurate regardless of whether posts have sidebars, grids, or nothing at all.

---

## 2.1.6.2 The DRY Principle: "One Shell to Rule Them All"

**Problem:** You have `post.njk`, `page.njk`, and `home.njk`. All three assume they are the full HTML document, so you copy-paste the `<head>`, `<meta>`, and `<script>` tags into all three.
**Consequence:** You add a new analytics script. You update `post.njk` but forget `page.njk`. Your data is now corrupt.

**Solution: The Single Shell Pattern**
You should have **exactly one file** in your entire project that contains `<!DOCTYPE html>`. Typically named `base.njk` or `shell.njk`.
Every other layout in your system should chain off this one file.

```
base.njk (The Shell)
├── home.njk
├── page.njk
└── post.njk
    └── product-review.njk
```

This ensures that global changes (favicon updates, meta tag adjustments, CSS links) happen in one place and propagate instantly.

---

## 2.1.6.3 Separation of Concerns: Frame vs. Art

Think of layouts as the Frame and content as the Art.
*   **The Content** should not know about the navigation menu.
*   **The Layout** should not contain the article text.

**Anti-Pattern: Hardcoded Content in Layouts**
Avoid putting specific text inside generic layouts.
*   *Bad*: Putting "Welcome to my Blog" hardcoded inside `base.njk`.
*   *Good*: Putting `{{ title }}` in `base.njk` and defining "Welcome to my Blog" in the content's front matter.

**Anti-Pattern: Layout Logic in Content**
Avoid putting structural HTML in your Markdown.
*   *Bad*: Writing `<div class="sidebar">...</div>` inside `my-post.md`.
*   *Good*: Using a layout that provides the sidebar structure automatically.

---

## 2.1.6.4 Commenting and Documentation

Layouts are code. They deserve comments. Future-you will forget why you added that specific `{% if %}` block.

**Header Comments**
At the top of complex layouts, add a comment block explaining required data.

```html
<!--
  LAYOUT: Product Page
  REQUIRED DATA:
    - title
    - price
    - product_id
  OPTIONAL DATA:
    - sale_price (triggers sale badge)
-->
```

This acts as a "contract" for anyone creating content that uses this layout.

---

## 2.1.6.5 Atomic Design Alignment

If you use a component methodology like **Atomic Design**, layouts occupy the "Templates" and "Pages" level.

1.  **Atoms/Molecules/Organisms**: These live in your `_includes/components/` folder (standard Nunjucks includes, not Layouts).
2.  **Templates**: These are your **Layouts** (`_includes/layouts/`). They assume no specific content but define the structure.
3.  **Pages**: These are your **Markdown files**. They provide the specific content that fills the Template.

By keeping Components (buttons, cards) separate from Layouts (grids, wrappers), you can reuse components across different layouts without duplication.

---

## Summary Checklist

| Practice | Rule |
| :--- | :--- |
| **Naming** | Name files by *purpose* (`post`), not *appearance* (`2-col`). |
| **Structure** | Create ONE base layout (`base.njk`) that owns the `<head>`. |
| **Chaining** | Use layout chaining to specialize (Base -> Post -> Review). |
| **Scope** | Keep content in `.md` files and structure in `.njk` files. |
| **Documentation** | Comment required front matter keys at the top of layouts. |
