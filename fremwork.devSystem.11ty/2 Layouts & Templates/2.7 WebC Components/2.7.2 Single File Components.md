| **Subtopic** | **Focus & Purpose** | **Key Concepts / Details** | **One-Line Recall** |
| :--- | :--- | :--- | :--- |
| **2.7.2 Single File Components** | Anatomy | HTML, CSS, and JS in one file; Co-location; Agnostic | Everything in one place. |
| **[[2.7.2.1 The .webc File]]** | Structure | A regular HTML file with superpowers; No wrapper `div` needed | It is just HTML+. |
| **[[2.7.2.2 Scoped Styles]]** | CSS | `<style webc:scoped>`; Auto-generated class hashing (`.w-1234`) | CSS that stays local. |
| **[[2.7.2.3 Component Script]]** | Client Logic | `<script>`; Aggregated to a separate bundle; not executed at build time | Logic for the browser. |
| **[[2.7.2.4 Build-Time Logic]]** | Server Logic | `<script webc:type="js">`; Generates HTML string during build | Logic for the server. |
| **[[2.7.2.5 Host Styling]]** | CSS | `:host` selector; styling the component tag itself | Style the wrapper. |

# 2.7.2 Single File Components

Ideally, a component should be a self-contained unit. In frameworks like Vue.js or Svelte, you write your Template, Style, and Logic in one file. WebC brings this pattern to Eleventy.

A `.webc` file is just an HTML file that Eleventy knows how to parse specially.

---

## 2.7.2.1 The .webc File Structure

**src/_components/my-card.webc**:
```html
<!-- 1. The Style -->
<style webc:scoped>
  :host { display: block; border: 1px solid #ccc; }
  h2 { color: blue; }
</style>

<!-- 2. The Logic (Optional) -->
<script>
  console.log("I run in the browser!");
</script>

<!-- 3. The Template -->
<div class="card-content">
  <h2><slot></slot></h2>
</div>
```

Unlike Nunjucks/Liquid partials, you don't need to manually manage the CSS or JS file separation. WebC handles it.

---

## 2.7.2.2 Scoped Styles (`webc:scoped`)

One of the hardest parts of CSS is naming collisions. WebC solves this with the `webc:scoped` attribute.

**Input**:
```html
<style webc:scoped>
  .text { color: red; }
</style>
<p class="text">Hello</p>
```

**Output (Built HTML)**:
```html
<style>
  .text.w-1ab2c3 { color: red; }
</style>
<p class="text w-1ab2c3">Hello</p>
```

WebC automatically generates a unique hash based on the component content and appends it to your selectors and HTML elements. This guarantees your `.text` class never conflicts with another component's `.text` class.

---

## 2.7.2.3 Client-Side Scripts (Asset Aggregation)

If you put a standard `<script>` tag in a WebC component, **it does not output** exactly where you placed it.

Instead, WebC "buckets" all scripts from all components used on the page and allows you to render them in a specific spot (usually the footer) using **Asset Aggregation**.

This prevents the classic problem of having `<script>` tags scattered all over your DOM.

*(See **[[2.7.4 Asset Aggregation]]** for setup details)*.

---

## 2.7.2.4 Build-Time Logic

Sometimes you need to use JavaScript to generate HTML during the build (like a map loop), but you don't want that JS to go to the client.

Use `webc:type="js"`.

```html
<script webc:type="js">
  const items = [1, 2, 3];
  items.map(i => `<li>Item ${i}</li>`).join("");
</script>
```

The output of this function is injected into the HTML string, and the script tag itself vanishes.

---

## 2.7.2.5 Host Styling (`:host`)

Since custom elements (`<my-card>`) exist in the DOM, you often need to style the container itself.

WebC supports the standard Shadow DOM selector `:host` even though it doesn't use Shadow DOM by default.

```css
<style webc:scoped>
  :host {
    display: flex;
    padding: 1rem;
  }
</style>
```

This compiles to:
```css
.my-card-w-1234 { display: flex; ... }
```
(And adds the class to the `<my-card>` tag).

---

## Quick Reference

| Feature | Syntax | Behavior |
| :--- | :--- | :--- |
| **Scope CSS** | `<style webc:scoped>` | Auto-hashes classes. |
| **Component Tag** | `:host` | Styles the `<my-tag>` element. |
| **Browser JS** | `<script>` | Moves to asset bucket. |
| **Server JS** | `<script webc:type="js">` | Runs at build time; outputs HTML. |
| **Keep Tag** | `webc:keep` | Prevents tag from being moved/bucketed. |
