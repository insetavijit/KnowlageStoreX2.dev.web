# **[[1.8 Project: Calculator]]**

## Overview

This hands-on project applies JavaScript fundamentals to build a basic calculator. You'll use variables to store values, operators for calculations, handle user input, apply type conversion for processing strings as numbers, and produce console output to display results.

## Project Goals

Build a functional calculator that can:
- Accept user input for numbers and operations
- Perform basic arithmetic (+, -, *, /)
- Handle type conversion properly
- Display results clearly
- Validate input to prevent errors

## Project Setup

**Create Project Files:**
```
calculator-project/
‚îú‚îÄ‚îÄ index.html
‚îú‚îÄ‚îÄ calculator.js
‚îî‚îÄ‚îÄ README.md
```

**index.html:**
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Calculator</title>
</head>
<body>
    <h1>JavaScript Calculator</h1>
    <p>Open the browser console (F12) to use the calculator</p>
    
    <script src="calculator.js"></script>
</body>
</html>
```

## Building the Calculator

**Version 1: Basic Calculator Function**

```javascript
// calculator.js

// Basic calculator function
function calculate(num1, operator, num2) {
    // Type conversion: ensure inputs are numbers
    let number1 = Number(num1);
    let number2 = Number(num2);
    
    // Validate inputs
    if (isNaN(number1) || isNaN(number2)) {
        console.error("Error: Please provide valid numbers");
        return null;
    }
    
    // Variable to store result
    let result;
    
    // Perform operation based on operator
    if (operator === '+') {
        result = number1 + number2;
    } else if (operator === '-') {
        result = number1 - number2;
    } else if (operator === '*') {
        result = number1 * number2;
    } else if (operator === '/') {
        // Handle division by zero
        if (number2 === 0) {
            console.error("Error: Cannot divide by zero");
            return null;
        }
        result = number1 / number2;
    } else {
        console.error("Error: Invalid operator. Use +, -, *, or /");
        return null;
    }
    
    // Console output
    console.log(`${number1} ${operator} ${number2} = ${result}`);
    return result;
}

// Test the calculator
calculate(10, '+', 5);   // 10 + 5 = 15
calculate(20, '-', 8);   // 20 - 8 = 12
calculate(6, '*', 7);    // 6 * 7 = 42
calculate(50, '/', 2);   // 50 / 2 = 25
```

**Version 2: Enhanced Calculator with Switch**

```javascript
function calculateAdvanced(num1, operator, num2) {
    // Type conversion
    const number1 = parseFloat(num1);
    const number2 = parseFloat(num2);
    
    // Input validation
    if (isNaN(number1) || isNaN(number2)) {
        console.error("‚ùå Invalid input: Please provide numbers");
        return null;
    }
    
    let result;
    
    // Switch statement for operations
    switch (operator) {
        case '+':
            result = number1 + number2;
            break;
        case '-':
            result = number1 - number2;
            break;
        case '*':
            result = number1 * number2;
            break;
        case '/':
            if (number2 === 0) {
                console.error("‚ùå Error: Division by zero");
                return null;
            }
            result = number1 / number2;
            break;
        case '%':
            result = number1 % number2;
            break;
        case '**':
            result = number1 ** number2;
            break;
        default:
            console.error("‚ùå Invalid operator:", operator);
            console.log("üìå Available operators: +, -, *, /, %, **");
            return null;
    }
    
    // Formatted output
    console.log(`‚úÖ ${number1} ${operator} ${number2} = ${result}`);
    return result;
}

// Test cases
console.log("=== Calculator Tests ===");
calculateAdvanced(15, '+', 25);    // 15 + 25 = 40
calculateAdvanced(100, '-', 37);   // 100 - 37 = 63
calculateAdvanced(8, '*', 9);      // 8 * 9 = 72
calculateAdvanced(144, '/', 12);   // 144 / 12 = 12
calculateAdvanced(17, '%', 5);     // 17 % 5 = 2
calculateAdvanced(2, '**', 8);     // 2 ** 8 = 256
```

**Version 3: Interactive Calculator**

```javascript
// Interactive calculator using prompt (browser only)
function runInteractiveCalculator() {
    console.log("üßÆ Interactive Calculator Started");
    console.log("Enter 'exit' to quit\n");
    
    // User input with prompt
    let num1 = prompt("Enter first number:");
    
    // Exit condition
    if (num1 === null || num1.toLowerCase() === 'exit') {
        console.log("Calculator closed");
        return;
    }
    
    let operator = prompt("Enter operator (+, -, *, /, %, **):");
    
    if (operator === null || operator.toLowerCase() === 'exit') {
        console.log("Calculator closed");
        return;
    }
    
    let num2 = prompt("Enter second number:");
    
    if (num2 === null || num2.toLowerCase() === 'exit') {
        console.log("Calculator closed");
        return;
    }
    
    // Perform calculation
    calculateAdvanced(num1, operator, num2);
}

// Run interactive calculator
// Uncomment the line below to start
// runInteractiveCalculator();
```

**Version 4: Calculator with History**

```javascript
// Calculator with operation history
const calculator = {
    history: [],
    
    calculate(num1, operator, num2) {
        // Type conversion
        const number1 = parseFloat(num1);
        const number2 = parseFloat(num2);
        
        // Validation
        if (isNaN(number1) || isNaN(number2)) {
            console.error("‚ùå Invalid input");
            return null;
        }
        
        let result;
        
        // Perform calculation
        switch (operator) {
            case '+': result = number1 + number2; break;
            case '-': result = number1 - number2; break;
            case '*': result = number1 * number2; break;
            case '/':
                if (number2 === 0) {
                    console.error("‚ùå Division by zero");
                    return null;
                }
                result = number1 / number2;
                break;
            case '%': result = number1 % number2; break;
            case '**': result = number1 ** number2; break;
            default:
                console.error("‚ùå Invalid operator");
                return null;
        }
        
        // Store in history
        const operation = {
            num1: number1,
            operator: operator,
            num2: number2,
            result: result,
            timestamp: new Date().toLocaleTimeString()
        };
        this.history.push(operation);
        
        // Output
        console.log(`‚úÖ ${number1} ${operator} ${number2} = ${result}`);
        return result;
    },
    
    showHistory() {
        if (this.history.length === 0) {
            console.log("No calculations yet");
            return;
        }
        
        console.log("\nüìä Calculation History:");
        console.table(this.history);
    },
    
    clearHistory() {
        this.history = [];
        console.log("‚úÖ History cleared");
    },
    
    getLastResult() {
        if (this.history.length === 0) {
            console.log("No previous calculations");
            return null;
        }
        const last = this.history[this.history.length - 1];
        console.log(`Last result: ${last.result}`);
        return last.result;
    }
};

// Use the calculator
calculator.calculate(10, '+', 5);
calculator.calculate(15, '*', 3);
calculator.calculate(100, '/', 4);
calculator.showHistory();
calculator.getLastResult();
```

## Complete Working Example

**calculator.js (Final Version):**

```javascript
"use strict";

// ============================================
// BASIC CALCULATOR PROJECT
// ============================================

console.log("üßÆ JavaScript Calculator Loaded!");
console.log("Use calculate(num1, operator, num2) to perform calculations\n");

// Main calculator function
function calculate(num1, operator, num2) {
    // Type conversion: Convert inputs to numbers
    const number1 = parseFloat(num1);
    const number2 = parseFloat(num2);
    
    // Input validation
    if (isNaN(number1) || isNaN(number2)) {
        console.error("‚ùå Error: Invalid number input");
        console.log(`   Received: num1="${num1}", num2="${num2}"`);
        return null;
    }
    
    // Variable to store result
    let result;
    let operationName;
    
    // Perform operation based on operator
    switch (operator) {
        case '+':
            result = number1 + number2;
            operationName = "Addition";
            break;
            
        case '-':
            result = number1 - number2;
            operationName = "Subtraction";
            break;
            
        case '*':
            result = number1 * number2;
            operationName = "Multiplication";
            break;
            
        case '/':
            if (number2 === 0) {
                console.error("‚ùå Error: Cannot divide by zero");
                return null;
            }
            result = number1 / number2;
            operationName = "Division";
            break;
            
        case '%':
            result = number1 % number2;
            operationName = "Modulus";
            break;
            
        case '**':
            result = number1 ** number2;
            operationName = "Exponentiation";
            break;
            
        default:
            console.error(`‚ùå Error: Unknown operator "${operator}"`);
            console.log("Available operators: +, -, *, /, %, **");
            return null;
    }
    
    // Console output with formatting
    console.log(`‚úÖ ${operationName}: ${number1} ${operator} ${number2} = ${result}`);
    
    return result;
}

// Demonstrate usage
console.log("=".repeat(50));
console.log("CALCULATOR DEMONSTRATIONS");
console.log("=".repeat(50) + "\n");

// Example calculations
calculate(10, '+', 5);      // Addition
calculate(20, '-', 8);      // Subtraction
calculate(6, '*', 7);       // Multiplication
calculate(50, '/', 2);      // Division
calculate(17, '%', 5);      // Modulus
calculate(2, '**', 10);     // Exponentiation

console.log("\n" + "=".repeat(50));
console.log("ERROR HANDLING DEMONSTRATIONS");
console.log("=".repeat(50) + "\n");

// Error cases
calculate(10, '/', 0);      // Division by zero
calculate("abc", '+', 5);   // Invalid number
calculate(10, '&', 5);      // Invalid operator

console.log("\n‚ú® Calculator ready! Try: calculate(12, '+', 8)");
```

## Concepts Applied

**1. Variables:**
```javascript
let number1 = parseFloat(num1);
let number2 = parseFloat(num2);
let result;
```

**2. Data Types:**
```javascript
const number1 = parseFloat(num1);  // Number
const operator = '+';  // String
const isValid = !isNaN(number1);  // Boolean
```

**3. Operators:**
```javascript
result = number1 + number2;  // Arithmetic
if (number2 === 0) { }  // Comparison
if (isNaN(number1) || isNaN(number2)) { }  // Logical
```

**4. Type Conversion:**
```javascript
const number1 = parseFloat(num1);  // String ‚Üí Number
if (isNaN(number1)) { }  // Check valid conversion
```

**5. Console Output:**
```javascript
console.log(`${number1} ${operator} ${number2} = ${result}`);
console.error("Error: Invalid input");
console.table(history);
```

## Extension Challenges

**1. Add More Operations:**
```javascript
case 'sqrt':
    result = Math.sqrt(number1);
    break;
case 'pow':
    result = Math.pow(number1, number2);
    break;
```

**2. Decimal Precision:**
```javascript
result = parseFloat(result.toFixed(2));
```

**3. Chain Calculations:**
```javascript
let runningTotal = 0;
function add(n) { runningTotal += n; return runningTotal; }
function subtract(n) { runningTotal -= n; return runningTotal; }
```

## Summary / Key Takeaways

- **Variables** store user input, intermediate values, and final results
- **Type conversion** (parseFloat, Number) handles string input from users
- **Operators** perform mathematical calculations (+, -, *, /, %, **)
- **Validation** prevents errors (NaN checks, division by zero)
- **Switch statement** cleanly handles multiple operation choices
- **Console output** displays results and error messages to users
- **Error handling** provides clear feedback for invalid inputs
- **Code organization** with functions makes code reusable and maintainable

This project demonstrates how JavaScript fundamentals combine to create a functional program. You've built your first complete JavaScript application!
