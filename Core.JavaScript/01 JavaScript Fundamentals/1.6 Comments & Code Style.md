# **[[1.6 Comments & Code Style]]**

## Overview

This topic covers writing clean, maintainable JavaScript code. You'll learn single-line and multi-line comment syntax, code formatting principles, naming conventions for variables and functions, semicolon usage rules, and best practices that make code readable and professional.

## Single-Line Comments

Single-line comments start with `//` and extend to the end of the line.

**Syntax:**
```javascript
// This is a single-line comment
let count = 5;  // Comment after code

// Use comments to explain WHY, not WHAT
// Good: Explains reasoning
// Cache value to avoid repeated API calls
let userData = fetchUser();

// Avoid: States the obvious
// Set count to 5
let count = 5;
```

**Use Cases:**
```javascript
// 1. Explain complex logic
let discount = price > 100 ? 0.2 : 0.1;  // 20% off for orders over $100

// 2. Temporary disable code
// console.log(debugInfo);  // Commented out for production

// 3. Mark TODOs
// TODO: Add input validation
// FIXME: Handle edge case when user is null
// HACK: Temporary workaround until API is fixed
```

## Multi-Line Comments

Multi-line comments start with `/*` and end with `*/`.

**Syntax:**
```javascript
/*
This is a multi-line comment
spanning multiple lines
*/

/* Single line in multi-line format */
```

**Use Cases:**
```javascript
/**
 * Function documentation (JSDoc style)
 * Calculates the total price including tax
 * @param {number} price - Base price
 * @param {number} taxRate - Tax rate as decimal
 * @returns {number} Total price with tax
 */
function calculateTotal(price, taxRate) {
    return price * (1 + taxRate);
}

/*
Block comment for complex explanations:
This algorithm uses a binary search approach because:
1. Data is pre-sorted
2. O(log n) performance is required
3. Memory constraints prevent linear search
*/
```

**Comment Out Code Blocks:**
```javascript
/*
function oldImplementation() {
    // Old code preserved for reference
    return legacyLogic();
}
*/

function newImplementation() {
    return modernLogic();
}
```

**Nested Comments (DON'T WORK):**
```javascript
/*
This is a comment
/* This won't work as nested */
Only the first */ ends the comment
*/
```

## Code Formatting

Consistent formatting improves readability and maintainability.

**Indentation:**
```javascript
// Use 2 or 4 spaces (be consistent)
function example() {
  if (condition) {
    doSomething();
  }
}

// Avoid tabs (spaces are more consistent across editors)
```

**Spacing:**
```javascript
// Good spacing
let sum = a + b;
if (x > 5) {
    console.log("Greater");
}

// Avoid cramped code
let sum=a+b;
if(x>5){console.log("Greater");}

// Space after keywords
if (condition) { }
for (let i = 0; i < 10; i++) { }
function name() { }

// Space around operators
let result = (a + b) * c;
```

**Line Length:**
```javascript
// Keep lines under 80-100 characters
// Good
let message = "This is a reasonably short line that fits " +
              "within the recommended length";

// Avoid
let message = "This is an excessively long line that goes on and on and on and makes horizontal scrolling necessary which is annoying";
```

**Blank Lines:**
```javascript
// Use blank lines to separate logical sections
function processUser(user) {
    // Validate input
    if (!user) return null;
    if (!user.email) return null;

    // Transform data
    let normalized = user.email.toLowerCase();
    let domain = normalized.split('@')[1];

    // Return result
    return { email: normalized, domain: domain };
}
```

**Braces:**
```javascript
// Same-line opening brace (JavaScript convention)
if (condition) {
    doSomething();
}

// Avoid different-line (breaks with certain semicolon rules)
if (condition)
{  // Not conventional in JavaScript
    doSomething();
}

// Single-line blocks: braces optional but recommended
if (simple) doThis();  // OK but braces safer
if (simple) { doThis(); }  // Better
```

## Naming Conventions

Clear naming makes code self-documenting.

**Variables and Functions (camelCase):**
```javascript
// Variables: noun phrases
let userName = "John";
let totalPrice = 99.99;
let isActive = true;
let userProfile = {};

// Functions: verb phrases
function getUserName() { }
function calculateTotal() { }
function isValidEmail() { }
function handleClick() { }

// Booleans: is/has/can prefix
let isLoggedIn = true;
let hasPermission = false;
let canEdit = true;
```

**Constants (UPPER_SNAKE_CASE):**
```javascript
const MAX_RETRIES = 3;
const API_KEY = "abc123";
const DEFAULT_TIMEOUT = 5000;

// Use regular camelCase for object constants
const config = {
    apiUrl: "https://api.example.com",
    timeout: 3000
};
```

**Classes (PascalCase):**
```javascript
class UserAccount { }
class ShoppingCart { }
class EmailValidator { }
```

**Private (convention: leading underscore):**
```javascript
// Not truly private, just a convention
class Person {
    constructor(name) {
        this._name = name;  // "Private" property
    }
    
    _validateName() {  // "Private" method
        // validation logic
    }
}
```

**Descriptive Names:**
```javascript
// Good: Clear and descriptive
let userAge = 25;
let maxLoginAttempts = 3;
function calculateDiscountedPrice(price, discount) { }

// Avoid: Unclear abbreviations
let ua = 25;
let mla = 3;
function calcDP(p, d) { }

// Exception: Common short names in loops
for (let i = 0; i < 10; i++) { }  // 'i' is conventional
```

## Semicolons

JavaScript has automatic semicolon insertion (ASI), but explicit semicolons prevent bugs.

**Recommended: Always Use Semicolons**
```javascript
let x = 5;
let y = 10;
console.log(x + y);

function greet(name) {
    return `Hello, ${name}`;
}
```

**ASI Can Cause Issues:**
```javascript
// Intended
return {
    name: "John"
};

// ASI interprets as (returns undefined!)
return;
{
    name: "John"
};

// Always write
return {
    name: "John"
};
```

**When Semicolons Are Required:**
```javascript
// Statements on same line
let a = 1; let b = 2;

// Before [ or ( at line start
let arr = [1, 2, 3];
[1, 2, 3].forEach(x => console.log(x));  // Breaks without semicolon above

// IIFE
;(function() {
    console.log("IIFE");
})();  // Leading semicolon for safety
```

## Best Practices

**1. Meaningful Names:**
```javascript
// Good
function calculateUserAge(birthYear) {
    return new Date().getFullYear() - birthYear;
}

// Avoid
function calc(y) {
    return new Date().getFullYear() - y;
}
```

**2. One Purpose Per Function:**
```javascript
// Good: Single responsibility
function validateEmail(email) {
    return email.includes('@');
}

function sendEmail(email, message) {
    // Sending logic
}

// Avoid: Multiple responsibilities
function validateAndSendEmail(email, message) {
    if (!email.includes('@')) return false;
    // Sending logic
    return true;
}
```

**3. Avoid Magic Numbers:**
```javascript
// Good: Named constants
const SECONDS_PER_DAY = 86400;
let days = seconds / SECONDS_PER_DAY;

// Avoid: Magic number
let days = seconds / 86400;  // What is 86400?
```

**4. Consistent Quotes:**
```javascript
// Choose one and stick with it
let singleQuote = 'Use single quotes';
let doubleQuote = "Or use double quotes";
let template = `Use backticks for ${interpolation}`;

// Most projects use single or double consistently
```

**5. Use Strict Mode:**
```javascript
"use strict";

// Catches common mistakes
x = 10;  // Error: x is not defined (good!)
```

**6. DRY Principle (Don't Repeat Yourself):**
```javascript
// Good: Reusable function
function formatCurrency(amount) {
    return `$${amount.toFixed(2)}`;
}
console.log(formatCurrency(10));
console.log(formatCurrency(20));

// Avoid: Repeated logic
console.log(`$${(10).toFixed(2)}`);
console.log(`$${(20).toFixed(2)}`);
```

**7. Early Returns:**
```javascript
// Good: Guard clauses
function processUser(user) {
    if (!user) return null;
    if (!user.isActive) return null;
    
    // Main logic
    return user.name.toUpperCase();
}

// Avoid: Deep nesting
function processUser(user) {
    if (user) {
        if (user.isActive) {
            return user.name.toUpperCase();
        }
    }
    return null;
}
```

## Summary / Key Takeaways

- **Comments:** Use `//` for single-line, `/* */` for multi-line; explain WHY, not WHAT
- **Code formatting:** Consistent indentation (2-4 spaces), spacing around operators, reasonable line length
- **Naming conventions:** camelCase for variables/functions, UPPER_CASE for constants, PascalCase for classes
- **Descriptive names:** `calculateUserAge` better than `calc` or `cua`
- **Semicolons:** Always use them to prevent ASI bugs
- **Best practices:** Single responsibility, DRY principle, early returns, meaningful names
- **Documentation:** Use JSDoc-style comments for function documentation
- **Consistency:** Choose a style and apply it throughout your codebase

Clean code style makes JavaScript programs easier to read, maintain, and debug. Consistency matters more than specific choices.
