# **[[2.5 While & Do-While Loops]]**

## Overview

This topic covers while and do-while loops for condition-based repetition. You'll learn while loop syntax, do-while syntax for guaranteed first execution, avoiding infinite loops, crafting proper loop conditions, and when to use while vs for loops.

## While Loops

The while loop repeats code while a condition is true.

**Syntax:**
```javascript
while (condition) {
    // Code to repeat
}
```

**Basic Example:**
```javascript
let count = 0;

while (count < 5) {
    console.log(count);
    count++;
}
// Output: 0, 1, 2, 3, 4
```

**Countdown:**
```javascript
let countdown = 10;

while (countdown > 0) {
    console.log(countdown);
    countdown--;
}
console.log("Liftoff!");
```

**Processing Items:**
```javascript
let items = ["apple", "banana", "orange"];
let index = 0;

while (index < items.length) {
    console.log(items[index]);
    index++;
}
```

**Unknown Iterations:**
```javascript
// Roll dice until we get 6
let roll;
let attempts = 0;

while (roll !== 6) {
    roll = Math.floor(Math.random() * 6) + 1;
    attempts++;
    console.log("Rolled:", roll);
}

console.log("Got 6 after", attempts, "attempts");
```

## Do-While Loops

The do-while loop always executes at least once, checking the condition after.

**Syntax:**
```javascript
do {
    // Code to execute
} while (condition);
```

**Basic Example:**
```javascript
let count = 0;

do {
    console.log(count);
    count++;
} while (count < 5);
// Output: 0, 1, 2, 3, 4
```

**Guaranteed Execution:**
```javascript
let value = 10;

// This runs even though condition is initially false
do {
    console.log("Executed once:", value);
} while (value < 5);
// Output: "Executed once: 10"
```

**User Input Validation:**
```javascript
let input;

do {
    input = prompt("Enter a number between 1 and 10:");
    input = parseInt(input);
} while (isNaN(input) || input < 1 || input > 10);

console.log("Valid input:", input);
```

**Menu System:**
```javascript
let choice;

do {
    console.log("1. View Items");
    console.log("2. Add Item");
    console.log("3. Exit");
    
    choice = prompt("Enter choice:");
    
    switch (choice) {
        case "1":
            console.log("Viewing items...");
            break;
        case "2":
            console.log("Adding item...");
            break;
        case "3":
            console.log("Goodbye!");
            break;
        default:
            console.log("Invalid choice");
    }
} while (choice !== "3");
```

## Infinite Loops

Loops that never endâ€”usually bugs, sometimes intentional.

**Accidental Infinite Loop:**
```javascript
// BUG: Counter never increments
let i = 0;
while (i < 5) {
    console.log(i);
    // Missing: i++
}

// BUG: Wrong condition direction
let j = 10;
while (j > 0) {
    console.log(j);
    j++;  // Should be j--
}
```

**Avoiding Infinite Loops:**
```javascript
// Always ensure condition can become false
let count = 0;
const MAX_ITERATIONS = 1000;

while (someCondition && count < MAX_ITERATIONS) {
    // Do work
    count++;
}

if (count >= MAX_ITERATIONS) {
    console.error("Loop limit reached");
}
```

**Intentional Infinite Loop:**
```javascript
// Game loop pattern
while (true) {
    let input = getInput();
    
    if (input === "quit") {
        break;  // Exit condition
    }
    
    processInput(input);
    updateGame();
    renderFrame();
}
```

**Event Loop Pattern:**
```javascript
let running = true;

while (running) {
    let event = waitForEvent();
    
    if (event.type === "shutdown") {
        running = false;
    } else {
        handleEvent(event);
    }
}
```

## Loop Conditions

Craft effective conditions for loop control.

**Simple Condition:**
```javascript
while (count < 10) {
    count++;
}
```

**Compound Condition:**
```javascript
while (index < array.length && !found) {
    if (array[index] === target) {
        found = true;
    }
    index++;
}
```

**Flag Variable:**
```javascript
let processing = true;
let errors = 0;

while (processing) {
    let result = doWork();
    
    if (result === "complete") {
        processing = false;
    } else if (result === "error") {
        errors++;
        if (errors >= 3) {
            processing = false;
        }
    }
}
```

**External State:**
```javascript
let queue = ["task1", "task2", "task3"];

while (queue.length > 0) {
    let task = queue.shift();  // Remove first element
    processTask(task);
}
```

**User-Controlled:**
```javascript
let userWantsToContinue = true;

while (userWantsToContinue) {
    performAction();
    userWantsToContinue = confirm("Continue?");
}
```

## Loop Patterns

Common patterns using while and do-while.

**Sentinel Loop:**
```javascript
// Process until special value encountered
let input;

while ((input = prompt("Enter name (or 'done' to stop):")) !== "done") {
    console.log("Hello,", input);
}
```

**Retry Pattern:**
```javascript
let success = false;
let attempts = 0;
const MAX_ATTEMPTS = 3;

while (!success && attempts < MAX_ATTEMPTS) {
    attempts++;
    try {
        result = fetchData();
        success = true;
    } catch (error) {
        console.log(`Attempt ${attempts} failed`);
    }
}

if (!success) {
    console.log("All attempts failed");
}
```

**Polling Pattern:**
```javascript
let dataReady = false;

while (!dataReady) {
    dataReady = checkDataStatus();
    
    if (!dataReady) {
        wait(1000);  // Wait 1 second before checking again
    }
}

processData();
```

## When to Use While vs For

Choose the right loop for the situation.

**Use For Loop When:**
```javascript
// Known number of iterations
for (let i = 0; i < 10; i++) { }

// Iterating over arrays
for (let i = 0; i < array.length; i++) { }

// Specific step pattern
for (let i = 0; i < 100; i += 10) { }
```

**Use While Loop When:**
```javascript
// Unknown number of iterations
while (dataAvailable()) {
    processData();
}

// Condition-based termination
while (userInput !== "quit") {
    userInput = getInput();
}

// External state changes
while (stream.hasMore()) {
    data = stream.read();
}
```

**Use Do-While When:**
```javascript
// Need at least one execution
do {
    input = getValidInput();
} while (!isValid(input));

// Menu or prompt systems
do {
    displayMenu();
    choice = getChoice();
} while (choice !== "exit");
```

**Comparison Table:**

| Loop Type | When to Use |
|-----------|-------------|
| **for** | Known iterations, counter-based |
| **while** | Unknown iterations, condition-first |
| **do-while** | Need at least one iteration |

## Summary / Key Takeaways

- **While loop:** Checks condition first; may execute zero times
- **Do-while loop:** Executes at least once; checks condition after
- **Infinite loops:** Avoid by ensuring condition can become false; use MAX_ITERATIONS guard
- **Loop conditions:** Can be simple comparisons, compound expressions, or flag variables
- **Use while:** When iteration count is unknown or depends on external condition
- **Use do-while:** When you need guaranteed first execution (validation, menus)
- **Use for:** When you know the exact number of iterations
- **Best practice:** Always ensure loop has clear exit condition

While loops provide flexible control flow when the number of iterations depends on runtime conditions.
