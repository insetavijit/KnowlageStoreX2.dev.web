# **[[2.8 Project: Number Guessing Game]]**

## Overview

This hands-on project applies control flow concepts to build an interactive number guessing game. You'll use loops for repeated guessing, conditionals for feedback, random number generation, user input handling, and game logic implementation.

## Project Goals

Build a number guessing game that:
- Generates a random secret number
- Accepts user guesses
- Provides hints (higher/lower)
- Tracks the number of attempts
- Allows replay

## Project Setup

**Create Project Files:**
```
guessing-game/
‚îú‚îÄ‚îÄ index.html
‚îú‚îÄ‚îÄ game.js
‚îî‚îÄ‚îÄ README.md
```

**index.html:**
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Number Guessing Game</title>
</head>
<body>
    <h1>Number Guessing Game</h1>
    <p>Open the browser console (F12) to play!</p>
    
    <script src="game.js"></script>
</body>
</html>
```

## Building the Game

**Version 1: Basic Game Loop**

```javascript
// game.js

// Generate random number between 1 and 100
function generateSecretNumber() {
    return Math.floor(Math.random() * 100) + 1;
}

// Simple game
function playGame() {
    const secretNumber = generateSecretNumber();
    let guess;
    let attempts = 0;
    
    console.log("üéÆ Number Guessing Game!");
    console.log("I'm thinking of a number between 1 and 100.");
    
    // Game loop using while
    while (guess !== secretNumber) {
        guess = parseInt(prompt("Enter your guess:"));
        attempts++;
        
        // Input validation
        if (isNaN(guess)) {
            console.log("‚ùå Please enter a valid number!");
            attempts--;  // Don't count invalid attempts
            continue;
        }
        
        // Range check
        if (guess < 1 || guess > 100) {
            console.log("‚ùå Please enter a number between 1 and 100!");
            attempts--;
            continue;
        }
        
        // Provide feedback using conditionals
        if (guess < secretNumber) {
            console.log("üìà Too low! Try higher.");
        } else if (guess > secretNumber) {
            console.log("üìâ Too high! Try lower.");
        } else {
            console.log(`üéâ Correct! The number was ${secretNumber}`);
            console.log(`You got it in ${attempts} attempts!`);
        }
    }
}

// Start the game
playGame();
```

**Version 2: Enhanced with Difficulty Levels**

```javascript
// game.js - Enhanced Version

function playEnhancedGame() {
    console.log("üéÆ Number Guessing Game - Enhanced Edition");
    console.log("Select Difficulty:");
    console.log("1. Easy (1-50, unlimited guesses)");
    console.log("2. Medium (1-100, 10 guesses)");
    console.log("3. Hard (1-200, 7 guesses)");
    
    let difficulty = prompt("Enter difficulty (1, 2, or 3):");
    
    let maxNumber, maxAttempts;
    
    // Switch for difficulty selection
    switch (difficulty) {
        case "1":
            maxNumber = 50;
            maxAttempts = Infinity;
            console.log("Easy mode: 1-50, unlimited guesses");
            break;
        case "2":
            maxNumber = 100;
            maxAttempts = 10;
            console.log("Medium mode: 1-100, 10 guesses");
            break;
        case "3":
            maxNumber = 200;
            maxAttempts = 7;
            console.log("Hard mode: 1-200, 7 guesses");
            break;
        default:
            console.log("Invalid choice. Using Medium difficulty.");
            maxNumber = 100;
            maxAttempts = 10;
    }
    
    const secretNumber = Math.floor(Math.random() * maxNumber) + 1;
    let attempts = 0;
    let won = false;
    
    // Game loop with attempt limit
    while (attempts < maxAttempts && !won) {
        let remaining = maxAttempts === Infinity ? "‚àû" : maxAttempts - attempts;
        let guess = parseInt(prompt(`Guess (1-${maxNumber}). Attempts left: ${remaining}`));
        
        // Validate input
        if (isNaN(guess) || guess < 1 || guess > maxNumber) {
            console.log(`‚ùå Enter a number between 1 and ${maxNumber}`);
            continue;
        }
        
        attempts++;
        
        // Check guess
        if (guess === secretNumber) {
            won = true;
            console.log(`üéâ Correct! You won in ${attempts} attempts!`);
        } else if (guess < secretNumber) {
            console.log("üìà Too low!");
        } else {
            console.log("üìâ Too high!");
        }
    }
    
    // Game over check
    if (!won) {
        console.log(`üíÄ Game Over! The number was ${secretNumber}`);
    }
}
```

**Version 3: Complete Game with Replay**

```javascript
// game.js - Complete Version

const GuessingGame = {
    settings: {
        easy: { max: 50, attempts: Infinity, name: "Easy" },
        medium: { max: 100, attempts: 10, name: "Medium" },
        hard: { max: 200, attempts: 7, name: "Hard" }
    },
    
    stats: {
        gamesPlayed: 0,
        gamesWon: 0,
        totalAttempts: 0,
        bestGame: Infinity
    },
    
    generateNumber(max) {
        return Math.floor(Math.random() * max) + 1;
    },
    
    getHint(guess, secret, max) {
        const diff = Math.abs(guess - secret);
        const percentage = (diff / max) * 100;
        
        if (percentage > 25) {
            return guess < secret ? "üìà Way too low!" : "üìâ Way too high!";
        } else if (percentage > 10) {
            return guess < secret ? "‚¨ÜÔ∏è Too low" : "‚¨áÔ∏è Too high";
        } else {
            return guess < secret ? "üî• Close! Go higher" : "üî• Close! Go lower";
        }
    },
    
    play(difficultyKey = "medium") {
        const difficulty = this.settings[difficultyKey];
        if (!difficulty) {
            console.log("Invalid difficulty. Using medium.");
            return this.play("medium");
        }
        
        console.log(`\nüéÆ ${difficulty.name} Mode`);
        console.log(`Guess a number between 1 and ${difficulty.max}`);
        if (difficulty.attempts !== Infinity) {
            console.log(`You have ${difficulty.attempts} attempts`);
        }
        console.log("‚îÄ".repeat(40));
        
        const secretNumber = this.generateNumber(difficulty.max);
        let attempts = 0;
        let won = false;
        
        // Main game loop
        do {
            const remaining = difficulty.attempts === Infinity 
                ? "‚àû" 
                : difficulty.attempts - attempts;
            
            let input = prompt(`Attempt ${attempts + 1} (${remaining} left):`);
            
            // Allow quit
            if (input === null || input.toLowerCase() === "quit") {
                console.log(`\nüè≥Ô∏è You gave up! The number was ${secretNumber}`);
                break;
            }
            
            let guess = parseInt(input);
            
            // Validate
            if (isNaN(guess)) {
                console.log("‚ùå Enter a valid number");
                continue;
            }
            
            if (guess < 1 || guess > difficulty.max) {
                console.log(`‚ùå Number must be between 1 and ${difficulty.max}`);
                continue;
            }
            
            attempts++;
            
            // Check result
            if (guess === secretNumber) {
                won = true;
                console.log(`\nüéâ CORRECT! The number was ${secretNumber}`);
                console.log(`‚ú® You got it in ${attempts} attempts!`);
                
                // Update stats
                this.stats.gamesWon++;
                if (attempts < this.stats.bestGame) {
                    this.stats.bestGame = attempts;
                    console.log("üèÜ New personal best!");
                }
            } else {
                console.log(this.getHint(guess, secretNumber, difficulty.max));
            }
            
        } while (!won && attempts < difficulty.attempts);
        
        // Game over (ran out of attempts)
        if (!won && attempts >= difficulty.attempts) {
            console.log(`\nüíÄ Game Over! The number was ${secretNumber}`);
        }
        
        // Update stats
        this.stats.gamesPlayed++;
        this.stats.totalAttempts += attempts;
        
        // Play again?
        if (confirm("Play again?")) {
            this.selectDifficulty();
        } else {
            this.showStats();
        }
    },
    
    selectDifficulty() {
        console.log("\nüìã Select Difficulty:");
        console.log("1. Easy (1-50, unlimited)");
        console.log("2. Medium (1-100, 10 attempts)");
        console.log("3. Hard (1-200, 7 attempts)");
        
        const choice = prompt("Enter 1, 2, or 3:");
        
        switch (choice) {
            case "1": this.play("easy"); break;
            case "2": this.play("medium"); break;
            case "3": this.play("hard"); break;
            default:
                console.log("Using medium difficulty");
                this.play("medium");
        }
    },
    
    showStats() {
        console.log("\nüìä Your Statistics:");
        console.log("‚îÄ".repeat(30));
        console.log(`Games Played: ${this.stats.gamesPlayed}`);
        console.log(`Games Won: ${this.stats.gamesWon}`);
        
        const winRate = this.stats.gamesPlayed > 0 
            ? ((this.stats.gamesWon / this.stats.gamesPlayed) * 100).toFixed(1)
            : 0;
        console.log(`Win Rate: ${winRate}%`);
        
        if (this.stats.gamesWon > 0) {
            const avgAttempts = (this.stats.totalAttempts / this.stats.gamesPlayed).toFixed(1);
            console.log(`Average Attempts: ${avgAttempts}`);
            console.log(`Best Game: ${this.stats.bestGame} attempts`);
        }
    },
    
    start() {
        console.log("‚ïê".repeat(40));
        console.log("üéÆ NUMBER GUESSING GAME");
        console.log("‚ïê".repeat(40));
        console.log("Try to guess the secret number!");
        console.log("Type 'quit' to give up on a game.\n");
        
        this.selectDifficulty();
    }
};

// Start the game
// GuessingGame.start();
console.log("Call GuessingGame.start() to begin!");
```

## Concepts Applied

**1. Loops:**
```javascript
// While loop for game play
while (!won && attempts < maxAttempts) {
    // Game logic
}

// Do-while for replay
do {
    playRound();
} while (confirm("Play again?"));
```

**2. Conditionals:**
```javascript
// If-else for feedback
if (guess < secretNumber) {
    console.log("Too low!");
} else if (guess > secretNumber) {
    console.log("Too high!");
} else {
    console.log("Correct!");
}

// Switch for difficulty
switch (difficulty) {
    case "1": settings = easy; break;
    case "2": settings = medium; break;
    case "3": settings = hard; break;
}
```

**3. Random Numbers:**
```javascript
// Generate random integer between min and max
function randomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}
```

**4. Input Validation:**
```javascript
// Validate user input
if (isNaN(guess)) {
    console.log("Invalid number");
    continue;  // Skip this iteration
}

if (guess < 1 || guess > 100) {
    console.log("Out of range");
    continue;
}
```

**5. Game Logic:**
```javascript
// Track attempts
let attempts = 0;
attempts++;

// Win condition
if (guess === secretNumber) {
    won = true;
}

// Loss condition
if (attempts >= maxAttempts) {
    gameOver = true;
}
```

## Extension Challenges

**1. Add a scoring system:**
```javascript
function calculateScore(attempts, maxAttempts, difficulty) {
    let baseScore = 1000;
    let penalty = attempts * 50;
    let bonus = difficulty === "hard" ? 500 : difficulty === "medium" ? 200 : 0;
    return Math.max(0, baseScore - penalty + bonus);
}
```

**2. Add hints remaining:**
```javascript
let hintsRemaining = 3;

function useHint() {
    if (hintsRemaining > 0) {
        hintsRemaining--;
        return revealHint();
    }
    return "No hints remaining!";
}
```

**3. Add binary search guidance:**
```javascript
function optimalGuess(low, high) {
    return Math.floor((low + high) / 2);
}

console.log(`Optimal strategy: guess ${optimalGuess(1, 100)}`);
```

## Summary / Key Takeaways

- **While loops** control the main game loop until win or loss
- **Conditionals (if/else)** provide game feedback and control flow
- **Switch statements** handle menu selections and difficulty
- **Input validation** ensures valid user input before processing
- **Random number generation** creates the secret number
- **Loop control (continue)** skips invalid input iterations
- **Game state tracking** uses variables for attempts, won status, etc.
- **Modular code** organizes game into functions and objects

This project demonstrates how control flow concepts combine to create interactive, engaging programs.
