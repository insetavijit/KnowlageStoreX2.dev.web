# **[[2.7 Logical Operators Advanced]]**

## Overview

This topic covers advanced usage of logical operators. You'll learn && (AND), || (OR), and ! (NOT) operators in depth, short-circuit evaluation, combining operators for complex conditions, operator precedence, and practical patterns for robust conditional logic.

## AND Operator (&&)

The AND operator returns true only when both operands are truthy.

**Basic Usage:**
```javascript
console.log(true && true);   // true
console.log(true && false);  // false
console.log(false && true);  // false
console.log(false && false); // false
```

**With Values:**
```javascript
// Returns first falsy value, or last value if all truthy
console.log("hello" && "world");  // "world"
console.log("hello" && 0);        // 0
console.log(null && "hello");     // null
console.log(1 && 2 && 3);         // 3
console.log(1 && 0 && 3);         // 0
```

**Conditional Execution:**
```javascript
let isLoggedIn = true;

// Execute function only if condition is true
isLoggedIn && showDashboard();

// Safe property access
let user = { name: "John" };
let name = user && user.name;  // "John"

let nullUser = null;
let nullName = nullUser && nullUser.name;  // null (no error)
```

**Multiple Conditions:**
```javascript
let age = 25;
let hasLicense = true;
let hasInsurance = true;

if (age >= 18 && hasLicense && hasInsurance) {
    console.log("Can rent a car");
}
```

## OR Operator (||)

The OR operator returns true when at least one operand is truthy.

**Basic Usage:**
```javascript
console.log(true || true);   // true
console.log(true || false);  // true
console.log(false || true);  // true
console.log(false || false); // false
```

**With Values:**
```javascript
// Returns first truthy value, or last value if all falsy
console.log("hello" || "world");  // "hello"
console.log("" || "default");     // "default"
console.log(null || undefined || 0 || "found");  // "found"
console.log(null || undefined || 0);  // 0 (last value)
```

**Default Values:**
```javascript
let userInput = "";
let displayName = userInput || "Guest";
console.log(displayName);  // "Guest"

function greet(name) {
    name = name || "Stranger";
    console.log("Hello, " + name);
}

greet();        // "Hello, Stranger"
greet("Alice"); // "Hello, Alice"
```

**Alternative Conditions:**
```javascript
let role = "moderator";

if (role === "admin" || role === "moderator") {
    console.log("Has elevated privileges");
}
```

## NOT Operator (!)

The NOT operator inverts a boolean value.

**Basic Usage:**
```javascript
console.log(!true);   // false
console.log(!false);  // true
console.log(!0);      // true (0 is falsy)
console.log(!"");     // true (empty string is falsy)
console.log(!null);   // true
console.log(!"hello"); // false (non-empty string is truthy)
```

**Double NOT (Boolean Conversion):**
```javascript
console.log(!!"hello");    // true
console.log(!!0);          // false
console.log(!![]);         // true (arrays are truthy)
console.log(!!null);       // false

// Equivalent to Boolean()
console.log(Boolean("hello"));  // true
```

**Negating Conditions:**
```javascript
let isBlocked = false;

if (!isBlocked) {
    console.log("User can post");
}

let items = [];

if (!items.length) {
    console.log("No items");
}
```

## Short-Circuit Evaluation

Logical operators stop evaluating as soon as the result is determined.

**AND Short-Circuit:**
```javascript
// Stops at first falsy value
false && expensiveOperation();  // expensiveOperation() never called

let user = null;
let result = user && user.profile && user.profile.name;
// Stops at user (null), doesn't access .profile
```

**OR Short-Circuit:**
```javascript
// Stops at first truthy value
true || expensiveOperation();  // expensiveOperation() never called

let value = getCachedValue() || computeValue();
// computeValue() only called if getCachedValue() returns falsy
```

**Practical Applications:**
```javascript
// Safe function call
function process(callback) {
    callback && callback();
}

// Lazy initialization
let cache = null;

function getData() {
    cache = cache || fetchExpensiveData();
    return cache;
}

// Guard against undefined
let config = settings && settings.config || defaultConfig;
```

## Combining Operators

Build complex conditions with multiple operators.

**AND + OR:**
```javascript
let user = { role: "editor", active: true };

// Use parentheses for clarity
if ((user.role === "admin" || user.role === "editor") && user.active) {
    console.log("Can edit content");
}
```

**AND + NOT:**
```javascript
let isAdmin = false;
let isOwner = true;

if (!isAdmin && isOwner) {
    console.log("Owner but not admin");
}
```

**OR + NOT:**
```javascript
let status = "pending";

if (!(status === "complete" || status === "failed")) {
    console.log("Still processing");
}
```

**Complex Expression:**
```javascript
let user = {
    age: 25,
    verified: true,
    country: "USA",
    premium: false
};

// Complex eligibility check
let eligible = 
    (user.age >= 21 && user.country === "USA") ||
    (user.verified && user.premium) ||
    user.age >= 65;

console.log("Eligible:", eligible);  // true
```

**Extracting to Variables:**
```javascript
// Hard to read
if ((a > 5 && b < 10) || (c === "x" && !d)) { }

// Better: Named conditions
let inRange = a > 5 && b < 10;
let isSpecialCase = c === "x" && !d;

if (inRange || isSpecialCase) {
    // Much clearer
}
```

## Operator Precedence

Understanding evaluation order.

**Precedence Order (High to Low):**
1. `!` (NOT)
2. `&&` (AND)
3. `||` (OR)

**Without Parentheses:**
```javascript
// NOT evaluates first
!true && false  // false && false = false
!false || true  // true || true = true

// AND before OR
true || false && false  // true || false = true
// Evaluated as: true || (false && false)

false || true && true   // false || true = true
// Evaluated as: false || (true && true)
```

**With Parentheses (Explicit):**
```javascript
// Force evaluation order
(true || false) && false  // true && false = false
(!false) || true          // true || true = true
```

**Complex Example:**
```javascript
let a = true, b = false, c = true;

// Without parentheses
let result1 = a || b && c;  // a || (b && c) = true || false = true

// With parentheses changing meaning
let result2 = (a || b) && c;  // true && c = true
```

**Best Practice:**
```javascript
// Always use parentheses for complex expressions
if ((condition1 && condition2) || (condition3 && condition4)) {
    // Clear intent
}
```

## Nullish Coalescing (??)

ES2020 operator for null/undefined checking.

**Basic Usage:**
```javascript
// Returns right side only for null or undefined
console.log(null ?? "default");      // "default"
console.log(undefined ?? "default"); // "default"
console.log(0 ?? "default");         // 0 (0 is valid)
console.log("" ?? "default");        // "" (empty string is valid)
console.log(false ?? "default");     // false
```

**Comparison with OR:**
```javascript
let count = 0;

// || treats 0 as falsy
let display1 = count || "No count";  // "No count" (wrong!)

// ?? only checks null/undefined
let display2 = count ?? "No count";  // 0 (correct!)
```

**Practical Usage:**
```javascript
function getConfig(options) {
    let timeout = options.timeout ?? 3000;
    let retries = options.retries ?? 3;
    let delay = options.delay ?? 1000;
    
    return { timeout, retries, delay };
}

getConfig({ timeout: 0 });  // { timeout: 0, retries: 3, delay: 1000 }
```

**With Optional Chaining:**
```javascript
let user = { settings: null };

// Safe access with default
let theme = user?.settings?.theme ?? "light";
console.log(theme);  // "light"
```

## Summary / Key Takeaways

- **&& (AND):** Returns first falsy value or last value; all must be truthy for true
- **|| (OR):** Returns first truthy value or last value; any truthy means true
- **! (NOT):** Inverts boolean; `!!` converts to boolean
- **Short-circuit:** Evaluation stops when result is determined
- **Precedence:** NOT > AND > OR; use parentheses for clarity
- **?? (Nullish):** Only falls back for null/undefined, preserves 0 and ""
- **Combining operators:** Use parentheses explicitly; extract complex conditions to named variables
- **Practical patterns:** Default values with `||` or `??`, safe access with `&&`, conditional execution

Advanced logical operators enable elegant, concise conditional logic in JavaScript.
