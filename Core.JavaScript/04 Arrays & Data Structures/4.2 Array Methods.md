# **[[4.2 Array Methods]]**

## Overview

This topic covers essential array methods. You'll learn push/pop/shift/unshift for adding and removing, splice for flexible modifications, slice for copying, concat for combining, and indexOf/includes for searching.

## Push/Pop

Modify the end of arrays.

**push() - Add to End:**
```javascript
let fruits = ["apple", "banana"];

fruits.push("orange");           // Returns 3 (new length)
console.log(fruits);             // ["apple", "banana", "orange"]

fruits.push("grape", "mango");   // Add multiple
console.log(fruits);             // ["apple", "banana", "orange", "grape", "mango"]
```

**pop() - Remove from End:**
```javascript
let fruits = ["apple", "banana", "orange"];

let last = fruits.pop();         // Returns "orange"
console.log(fruits);             // ["apple", "banana"]
console.log(last);               // "orange"

// Pop from empty array
[].pop();  // undefined
```

**Stack Pattern (LIFO):**
```javascript
let stack = [];

stack.push(1);  // [1]
stack.push(2);  // [1, 2]
stack.push(3);  // [1, 2, 3]

stack.pop();    // 3 → [1, 2]
stack.pop();    // 2 → [1]
```

## Shift/Unshift

Modify the beginning of arrays.

**shift() - Remove from Beginning:**
```javascript
let fruits = ["apple", "banana", "orange"];

let first = fruits.shift();      // Returns "apple"
console.log(fruits);             // ["banana", "orange"]
```

**unshift() - Add to Beginning:**
```javascript
let fruits = ["banana", "orange"];

fruits.unshift("apple");         // Returns 3 (new length)
console.log(fruits);             // ["apple", "banana", "orange"]

fruits.unshift("grape", "mango");  // Add multiple
// ["grape", "mango", "apple", "banana", "orange"]
```

**Queue Pattern (FIFO):**
```javascript
let queue = [];

queue.push(1);     // [1]
queue.push(2);     // [1, 2]
queue.push(3);     // [1, 2, 3]

queue.shift();     // 1 → [2, 3]
queue.shift();     // 2 → [3]
```

**Performance Note:**
```javascript
// shift/unshift are slower than push/pop
// They require re-indexing all elements
let arr = [1, 2, 3, 4, 5];
arr.shift();      // O(n) - shifts all remaining elements
arr.pop();        // O(1) - just removes last element
```

## Splice

Add, remove, or replace elements at any position.

**Syntax:**
```javascript
array.splice(start, deleteCount, item1, item2, ...);
// Returns array of deleted elements
```

**Remove Elements:**
```javascript
let arr = ["a", "b", "c", "d", "e"];

let removed = arr.splice(1, 2);  // Start at index 1, remove 2
console.log(arr);      // ["a", "d", "e"]
console.log(removed);  // ["b", "c"]
```

**Insert Elements:**
```javascript
let arr = ["a", "d", "e"];

arr.splice(1, 0, "b", "c");  // Start at 1, delete 0, insert "b", "c"
console.log(arr);            // ["a", "b", "c", "d", "e"]
```

**Replace Elements:**
```javascript
let arr = ["a", "b", "c", "d", "e"];

arr.splice(1, 2, "X", "Y", "Z");  // Replace 2 elements with 3
console.log(arr);                 // ["a", "X", "Y", "Z", "d", "e"]
```

**Negative Index:**
```javascript
let arr = [1, 2, 3, 4, 5];

arr.splice(-2, 1);  // Remove 1 element starting 2 from end
console.log(arr);   // [1, 2, 3, 5]
```

## Slice

Create a shallow copy of a portion.

**Syntax:**
```javascript
array.slice(start, end);  // end not included
// Original array unchanged
```

**Basic Slicing:**
```javascript
let arr = ["a", "b", "c", "d", "e"];

arr.slice(1, 3);   // ["b", "c"] (index 1 to 2)
arr.slice(2);      // ["c", "d", "e"] (index 2 to end)
arr.slice();       // ["a", "b", "c", "d", "e"] (full copy)
arr.slice(0, -1);  // ["a", "b", "c", "d"] (all but last)
```

**Negative Indices:**
```javascript
let arr = [1, 2, 3, 4, 5];

arr.slice(-3);      // [3, 4, 5] (last 3)
arr.slice(-3, -1);  // [3, 4] (last 3 to second-to-last)
```

**Copy vs Reference:**
```javascript
let original = [1, 2, 3];
let copy = original.slice();

copy.push(4);
console.log(original);  // [1, 2, 3] (unchanged)
console.log(copy);      // [1, 2, 3, 4]

// Note: shallow copy - nested objects are still references
let nested = [{a: 1}];
let shallowCopy = nested.slice();
shallowCopy[0].a = 999;
console.log(nested[0].a);  // 999 (affected!)
```

## Concat

Combine arrays into a new array.

**Basic Concatenation:**
```javascript
let arr1 = [1, 2];
let arr2 = [3, 4];
let arr3 = [5, 6];

let combined = arr1.concat(arr2);       // [1, 2, 3, 4]
let all = arr1.concat(arr2, arr3);      // [1, 2, 3, 4, 5, 6]
```

**With Values:**
```javascript
let arr = [1, 2];

arr.concat(3, 4);           // [1, 2, 3, 4]
arr.concat([3, 4], 5);      // [1, 2, 3, 4, 5]
arr.concat([3, [4, 5]]);    // [1, 2, 3, [4, 5]] (nested not flattened)
```

**Spread Alternative:**
```javascript
let arr1 = [1, 2];
let arr2 = [3, 4];

let combined = [...arr1, ...arr2];  // [1, 2, 3, 4]
let withNew = [...arr1, 5, 6];     // [1, 2, 5, 6]
```

**Original Unchanged:**
```javascript
let original = [1, 2];
let result = original.concat([3, 4]);

console.log(original);  // [1, 2] (unchanged)
console.log(result);    // [1, 2, 3, 4]
```

## IndexOf/Includes

Search for elements in arrays.

**indexOf():**
```javascript
let arr = ["apple", "banana", "orange", "banana"];

arr.indexOf("banana");       // 1 (first occurrence)
arr.indexOf("grape");        // -1 (not found)
arr.indexOf("banana", 2);    // 3 (search from index 2)
```

**lastIndexOf():**
```javascript
let arr = ["a", "b", "c", "b", "a"];

arr.lastIndexOf("b");      // 3 (last occurrence)
arr.lastIndexOf("b", 2);   // 1 (search backwards from index 2)
```

**includes():**
```javascript
let arr = [1, 2, 3, NaN];

arr.includes(2);         // true
arr.includes(5);         // false
arr.includes(NaN);       // true (indexOf can't find NaN!)
arr.includes(2, 2);      // false (search from index 2)
```

**indexOf vs includes:**
```javascript
let arr = [1, 2, NaN, undefined];

// indexOf returns -1 for not found, can't find NaN
arr.indexOf(NaN) !== -1;    // false (wrong!)

// includes returns boolean, finds NaN
arr.includes(NaN);          // true (correct!)

// For existence check, prefer includes
if (arr.includes(value)) {
    // Found
}
```

## Summary / Key Takeaways

- **push/pop:** Add/remove at end; fast O(1) operations
- **shift/unshift:** Add/remove at beginning; slower O(n)
- **splice:** Versatile add/remove/replace at any position; mutates array
- **slice:** Copy portion of array; does not mutate; returns new array
- **concat:** Combine arrays; does not mutate; returns new array
- **indexOf:** Find first index of element; returns -1 if not found
- **includes:** Check if element exists; returns boolean; finds NaN
- **Spread alternative:** `[...arr1, ...arr2]` for combining
- **Shallow copy:** `slice()` and `concat()` create shallow copies

Array methods are essential tools for data manipulation in JavaScript.
