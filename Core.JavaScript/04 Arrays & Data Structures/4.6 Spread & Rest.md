# **[[4.6 Spread & Rest]]**

## Overview

This topic covers spread and rest operators. You'll learn the spread operator for expanding arrays, rest parameters for collecting arguments, copying and merging arrays, and destructuring with spread.

## Spread Operator

Expand an iterable into individual elements.

**Basic Spread:**
```javascript
let numbers = [1, 2, 3];

console.log(...numbers);     // 1 2 3 (individual values)
console.log([...numbers]);   // [1, 2, 3] (new array)
```

**Function Arguments:**
```javascript
let values = [5, 10, 15];

// Without spread
Math.max(values);     // NaN (array, not numbers)

// With spread
Math.max(...values);  // 15

// Multiple spreads
let more = [20, 25];
Math.max(...values, ...more);  // 25
```

**Array Literals:**
```javascript
let arr1 = [1, 2];
let arr2 = [3, 4];

// Combine arrays
let combined = [...arr1, ...arr2];  // [1, 2, 3, 4]

// Add elements
let withMore = [...arr1, 5, 6];     // [1, 2, 5, 6]

// Insert at position
let inserted = [0, ...arr1, 3];     // [0, 1, 2, 3]
```

## Rest Parameters

Collect remaining arguments into an array.

**Function Rest:**
```javascript
function sum(...numbers) {
    return numbers.reduce((a, b) => a + b, 0);
}

sum(1, 2, 3);       // 6
sum(1, 2, 3, 4, 5); // 15
```

**With Regular Parameters:**
```javascript
function greet(greeting, ...names) {
    names.forEach(name => {
        console.log(`${greeting}, ${name}!`);
    });
}

greet("Hello", "Alice", "Bob", "Charlie");
// Hello, Alice!
// Hello, Bob!
// Hello, Charlie!
```

**Must Be Last:**
```javascript
// Valid
function valid(first, second, ...rest) { }

// Invalid
// function invalid(...rest, last) { }  // SyntaxError
```

**Rest vs arguments:**
```javascript
// Rest parameters: real array
function modern(...args) {
    return args.map(x => x * 2);  // Works!
}

// arguments: array-like
function legacy() {
    return arguments.map(x => x * 2);  // Error!
    // Must convert: [...arguments].map(...)
}
```

## Copying Arrays

Create shallow copies with spread.

**Array Copy:**
```javascript
let original = [1, 2, 3];

let copy = [...original];
copy.push(4);

console.log(original);  // [1, 2, 3] (unchanged)
console.log(copy);      // [1, 2, 3, 4]
```

**Shallow Copy Warning:**
```javascript
let nested = [{ a: 1 }, { b: 2 }];
let copy = [...nested];

copy[0].a = 999;
console.log(nested[0].a);  // 999 (affected!)

// Objects are still references
```

**Deep Copy:**
```javascript
// For simple data
let deep = JSON.parse(JSON.stringify(nested));

// Or use structuredClone (modern)
let deepClone = structuredClone(nested);
```

## Merging Arrays

Combine multiple arrays.

**Concatenation:**
```javascript
let arr1 = [1, 2];
let arr2 = [3, 4];
let arr3 = [5, 6];

let merged = [...arr1, ...arr2, ...arr3];
// [1, 2, 3, 4, 5, 6]
```

**With Middle Elements:**
```javascript
let merged = [...arr1, 0, 0, ...arr2];
// [1, 2, 0, 0, 3, 4]
```

**Merge Objects in Arrays:**
```javascript
let defaults = [{ a: 1 }, { b: 2 }];
let custom = [{ c: 3 }];

let all = [...defaults, ...custom];
// [{ a: 1 }, { b: 2 }, { c: 3 }]
```

**Conditional Merge:**
```javascript
let base = [1, 2];
let extra = [3, 4];
let includeExtra = true;

let result = [
    ...base,
    ...(includeExtra ? extra : [])
];
// [1, 2, 3, 4]
```

## Destructuring

Extract values with spread.

**Array Destructuring with Rest:**
```javascript
let [first, second, ...rest] = [1, 2, 3, 4, 5];

console.log(first);  // 1
console.log(second); // 2
console.log(rest);   // [3, 4, 5]
```

**Skip Elements:**
```javascript
let [first, , third, ...others] = [1, 2, 3, 4, 5];

console.log(first);   // 1
console.log(third);   // 3
console.log(others);  // [4, 5]
```

**Swap Variables:**
```javascript
let a = 1;
let b = 2;

[a, b] = [b, a];

console.log(a);  // 2
console.log(b);  // 1
```

**Function Return:**
```javascript
function getMinMax(arr) {
    return [Math.min(...arr), Math.max(...arr)];
}

let [min, max] = getMinMax([5, 2, 8, 1, 9]);
console.log(min, max);  // 1 9
```

## Object Spread

Spread also works with objects.

**Copy Object:**
```javascript
let original = { a: 1, b: 2 };
let copy = { ...original };
```

**Merge Objects:**
```javascript
let defaults = { theme: "light", size: "medium" };
let custom = { theme: "dark" };

let config = { ...defaults, ...custom };
// { theme: "dark", size: "medium" }
// Later properties override earlier ones
```

**Add/Override Properties:**
```javascript
let user = { name: "Alice", age: 25 };

let updated = { ...user, age: 26 };
// { name: "Alice", age: 26 }

let extended = { ...user, email: "alice@example.com" };
// { name: "Alice", age: 25, email: "..." }
```

**Object Rest:**
```javascript
let { name, ...rest } = { name: "Alice", age: 25, city: "NYC" };

console.log(name);  // "Alice"
console.log(rest);  // { age: 25, city: "NYC" }
```

## Summary / Key Takeaways

- **Spread (`...`):** Expands iterable into individual elements
- **Rest (`...`):** Collects remaining elements into array
- **Array copy:** `[...arr]` creates shallow copy
- **Merge arrays:** `[...arr1, ...arr2]` combines arrays
- **Function args:** `fn(...arr)` spreads as arguments
- **Rest parameters:** `function(...args)` collects arguments
- **Destructuring rest:** `[first, ...rest]` captures remaining
- **Object spread:** `{...obj}` copies or merges objects
- **Shallow copy:** Nested objects are still references
- **Order matters:** In merges, later values override earlier

Spread and rest operators provide concise syntax for common array and object operations.
