# **[[4.3 Iteration Methods]]**

## Overview

This topic covers array iteration methods. You'll learn forEach for simple iteration, map for transformation, filter for selection, find for locating elements, and some/every for testing conditions.

## forEach

Execute a function for each element.

**Basic Usage:**
```javascript
let fruits = ["apple", "banana", "orange"];

fruits.forEach(function(fruit) {
    console.log(fruit);
});
// apple
// banana
// orange
```

**With Index:**
```javascript
let colors = ["red", "green", "blue"];

colors.forEach((color, index) => {
    console.log(`${index}: ${color}`);
});
// 0: red
// 1: green
// 2: blue
```

**With Array Reference:**
```javascript
let numbers = [1, 2, 3];

numbers.forEach((num, index, array) => {
    console.log(`${num} of ${array.length}`);
});
```

**No Return Value:**
```javascript
let result = [1, 2, 3].forEach(x => x * 2);
console.log(result);  // undefined

// Use for side effects only
let sum = 0;
[1, 2, 3].forEach(n => sum += n);
console.log(sum);  // 6
```

**Cannot Break:**
```javascript
// forEach always runs through all elements
// Use for...of with break if needed
[1, 2, 3, 4, 5].forEach(n => {
    if (n === 3) return;  // Only skips this iteration
    console.log(n);
});
// 1, 2, 4, 5 (3 was skipped, but loop continued)
```

## map

Transform each element into a new array.

**Basic Transformation:**
```javascript
let numbers = [1, 2, 3, 4, 5];

let doubled = numbers.map(n => n * 2);
console.log(doubled);   // [2, 4, 6, 8, 10]
console.log(numbers);   // [1, 2, 3, 4, 5] (unchanged)
```

**Object Transformation:**
```javascript
let users = [
    { name: "Alice", age: 25 },
    { name: "Bob", age: 30 }
];

let names = users.map(user => user.name);
// ["Alice", "Bob"]

let descriptions = users.map(user => 
    `${user.name} is ${user.age}`
);
// ["Alice is 25", "Bob is 30"]
```

**With Index:**
```javascript
let letters = ["a", "b", "c"];

let indexed = letters.map((letter, index) => 
    `${index}: ${letter}`
);
// ["0: a", "1: b", "2: c"]
```

**Create Objects:**
```javascript
let names = ["Alice", "Bob", "Charlie"];

let users = names.map((name, id) => ({
    id: id + 1,
    name: name,
    active: true
}));
```

## filter

Select elements that pass a test.

**Basic Filtering:**
```javascript
let numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

let evens = numbers.filter(n => n % 2 === 0);
console.log(evens);  // [2, 4, 6, 8, 10]

let big = numbers.filter(n => n > 5);
console.log(big);    // [6, 7, 8, 9, 10]
```

**Object Filtering:**
```javascript
let users = [
    { name: "Alice", age: 25, active: true },
    { name: "Bob", age: 17, active: true },
    { name: "Charlie", age: 30, active: false }
];

let adults = users.filter(user => user.age >= 18);
let activeAdults = users.filter(user => 
    user.age >= 18 && user.active
);
```

**Remove Falsy Values:**
```javascript
let mixed = [0, 1, "", "hello", null, true, undefined];

let truthy = mixed.filter(Boolean);
// [1, "hello", true]

// Equivalent to
let truthy2 = mixed.filter(x => !!x);
```

**Unique Values:**
```javascript
let numbers = [1, 2, 2, 3, 3, 3, 4];

let unique = numbers.filter((value, index, array) => 
    array.indexOf(value) === index
);
// [1, 2, 3, 4]

// Or use Set
let unique2 = [...new Set(numbers)];
```

## find/findIndex

Locate a single element.

**find():**
```javascript
let users = [
    { id: 1, name: "Alice" },
    { id: 2, name: "Bob" },
    { id: 3, name: "Charlie" }
];

let user = users.find(u => u.id === 2);
console.log(user);  // { id: 2, name: "Bob" }

let notFound = users.find(u => u.id === 99);
console.log(notFound);  // undefined
```

**findIndex():**
```javascript
let numbers = [5, 10, 15, 20, 25];

let index = numbers.findIndex(n => n > 12);
console.log(index);  // 2 (index of 15)

let notFound = numbers.findIndex(n => n > 100);
console.log(notFound);  // -1 (not found)
```

**find vs filter:**
```javascript
let numbers = [1, 2, 3, 4, 5];

// find: returns first match
numbers.find(n => n > 2);     // 3

// filter: returns all matches
numbers.filter(n => n > 2);   // [3, 4, 5]
```

**findLast/findLastIndex (ES2023):**
```javascript
let numbers = [1, 2, 3, 4, 5];

numbers.findLast(n => n % 2 === 0);      // 4 (last even)
numbers.findLastIndex(n => n % 2 === 0); // 3 (index of 4)
```

## some/every

Test array conditions.

**some() - At Least One:**
```javascript
let numbers = [1, 3, 5, 7, 8, 9];

numbers.some(n => n % 2 === 0);  // true (8 is even)
numbers.some(n => n > 10);       // false (none > 10)

// Short-circuits on first true
let checked = 0;
[1, 2, 3].some(n => {
    checked++;
    return n === 2;
});
console.log(checked);  // 2 (stopped at 2)
```

**every() - All Must Pass:**
```javascript
let numbers = [2, 4, 6, 8, 10];

numbers.every(n => n % 2 === 0);  // true (all even)
numbers.every(n => n > 5);        // false (2 and 4 fail)

// Short-circuits on first false
[1, 2, 3].every(n => n > 0);      // true
[1, -2, 3].every(n => n > 0);     // false (stops at -2)
```

**Practical Examples:**
```javascript
let users = [
    { name: "Alice", verified: true },
    { name: "Bob", verified: true },
    { name: "Charlie", verified: false }
];

// Check if any unverified
let hasUnverified = users.some(u => !u.verified);  // true

// Check if all verified
let allVerified = users.every(u => u.verified);    // false

// Validation
let passwords = ["abc123", "xyz789"];
let allValid = passwords.every(p => p.length >= 6);
```

**Empty Arrays:**
```javascript
[].some(x => true);   // false (none to match)
[].every(x => false); // true (vacuously true)
```

## Summary / Key Takeaways

- **forEach:** Side effects only; no return value; cannot break
- **map:** Transform each element; returns new array of same length
- **filter:** Select matching elements; returns new array (may be shorter)
- **find:** Return first matching element or undefined
- **findIndex:** Return index of first match or -1
- **some:** True if any element passes test; short-circuits
- **every:** True if all elements pass test; short-circuits
- **Chaining:** Methods return arrays, enabling chains like `.filter().map()`
- **Immutability:** All these methods create new arrays (except forEach)

Iteration methods enable declarative, expressive array processing in JavaScript.
